{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../src/app.ts","webpack:///../src/createComponent.tsx","webpack:///../src/vdom-my.ts","webpack:///../src/decorator.ts","webpack:///../src/directive.ts","webpack:///../src/component.ts","webpack:///../src/web-component.ts","webpack:///../src/router.ts","webpack:///../src/apprun.ts","webpack:///../src/vdom.ts","webpack:///./src/_site/index.tsx","webpack:///./src/_site/router.tsx","webpack:///(webpack)/buildin/global.js","webpack:///./src/components/my-img.tsx","webpack:///./src/components/my-xkcd.tsx","webpack:///./src/index.tsx","webpack:///./src/layout/index.tsx","webpack:///./src/_lib/index.tsx","webpack:///./src/_lib/components_md.tsx","webpack:///./src/_lib/configuration/diy_md.tsx","webpack:///./src/_lib/configuration/index_md.tsx","webpack:///./src/_lib/configuration/layout_md.tsx","webpack:///./src/_lib/deploy/firebase_md.tsx","webpack:///./src/_lib/deploy/github_md.tsx","webpack:///./src/_lib/deploy/index_md.tsx","webpack:///./src/_lib/esm_md.tsx","webpack:///./src/_lib/faq_md.tsx","webpack:///./src/_lib/fetch_md.tsx","webpack:///./src/_lib/getting-started_md.tsx","webpack:///./src/_lib/how-it-works_md.tsx","webpack:///./src/_lib/index_md.tsx","webpack:///./src/_lib/pwa_md.tsx","webpack:///./src/_lib/references_md.tsx","webpack:///./src/_lib/todo_md.tsx","webpack:///./src/_lib/web-components/html_html.tsx","webpack:///./src/_lib/web-components/index_md.tsx","webpack:///./src/_lib/web-components/tsx_tsx.tsx","webpack:///./src/_lib/_404/index_tsx.tsx"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","App","[object Object]","this","_events","fn","options","push","subscribers","filter","sub","length","args","console","assert","delay","apply","once","on","_t","clearTimeout","setTimeout","app","self","global","_AppRunVersions","_idx","ATTR_PROPS","collect","children","ch","forEach","Array","isArray","keyCache","updateElement","element","nodes","parent","createComponent","node","idx","map","child","vdom","tag","getPrototypeOf","__isAppRunComponent","props","id","__componentCache","component","mount","mounted","state","Promise","view","rendered","updateChildren","update","el","key1","nodeName","key2","toUpperCase","updateProps","parentNode","replaceChild","len","Math","min","childNodes","textContent","nodeType","createText","old","insertBefore","appendChild","removeChild","lastChild","document","createDocumentFragment","indexOf","div","createElement","insertAdjacentHTML","substring","createTextNode","isSvg","JSON","stringify","createElementNS","oldProps","newProps","class","className","keys","style","cssText","startsWith","cname","replace","match","dataset","SVGElement","tagName","getAttribute","setAttribute","removeAttribute","Reflect","meta","WeakMap","metadataKey","metadataValue","target","has","set","customElement","constructor","webComponent","getStateValue","setStateValue","setState","O","event","e","run","handler","type","checked","onclick","oninput","Number","selectedIndex","onchange","multiple","selected","componentCache","components","REFRESH","Component","render","h","directive","html","getElementById","tracking_attr","unload","_component","tracking_id","Date","valueOf","toString","MutationObserver","observer","changes","removedNodes","oldValue","from","disconnect","observe","childList","subtree","attributes","attributeOldValue","attributeFilter","history","then","catch","err","error","_state","renderState","enable_history","_history","_history_idx","callback","global_event","prev","next","add_actions","model","action","newState","actions","getMetadataKeys","getMetadata","all","act","opts","split","trim","add_action","is_global_event","_app","_actions","off","componentClass","HTMLElement","super","observedAttributes","isConnected","shadow","_shadowRoot","attachShadow","item","parentElement","unmount","route","url","rest","_","Fragment","customElements","start","NOOP","addEventListener","onpopstate","location","hash","React","__webpack_exports__","config","preventDefault","apprun_esm","pathname","linkClick","menu","href","origin","pushState","router","eventRoot","body","layout","assign","pages","def","Comp","g","Function","my_img_Img","arguments","src","decorators","desc","getOwnPropertyDescriptor","decorate","__decorate","default_1","$onclick","loading","comic","title","fetchComic","async","response","fetch","json","my_xkcd_decorate","nav","text","link","sidebar","markdown","version","xmlns","width","height","fill","_site"],"mappings":"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","file":"dist/app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","export class App {\n\n  private _events: Object;\n\n  public start;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: any = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn: fn, options: options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    let subscribers = this._events[name];\n    if (subscribers) {\n      subscribers = subscribers.filter((sub) => sub.fn !== fn);\n      if (subscribers.length) this._events[name] = subscribers;\n      else delete this._events[name]\n    }\n  }\n\n  run(name: string, ...args): number {\n    let subscribers = this._events[name];\n    console.assert(!!subscribers, 'No subscriber for event: ' + name);\n    if (subscribers) {\n      subscribers = subscribers.filter((sub) => {\n        const { fn, options } = sub;\n        if (options.delay) {\n          this.delay(name, fn, args, options);\n        } else {\n          fn.apply(this, args);\n        }\n        return !sub.options.once;\n      });\n      if (subscribers.length) this._events[name] = subscribers;\n      else delete this._events[name]\n    }\n\n    return subscribers ? subscribers.length : 0;\n  }\n\n  once(name: string, fn, options: any = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      fn.apply(this, args);\n    }, options.delay);\n  }\n}\n\nconst AppRunVersions = 'AppRun-2';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global) \nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nfunction render(node, parent, idx) {\n  const { tag, props, children } = node;\n\n  let id = props && props['id'];\n  let key = `_${idx}_`\n  if (!id) {\n    id = `_${idx}_`;\n  } else {\n    key = `_${id}_`;\n  }\n\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component) {\n    component = parent.__componentCache[key] = new tag({ ...props, children }).mount(id);\n  }\n  component.mounted && component.mounted(props, children);\n  const state = component.state;\n  let vdom = '';\n  if (!(state instanceof Promise) && component.view) {\n    vdom = component.view(state, props);\n    component.rendered && setTimeout(() => component.rendered(state, props));\n  }\n  return <section {...props} id={id}>{vdom}</section>;\n}\n\nlet _idx = 0;\nfunction createComponent(node, parent, idx = 0) {\n  if (idx === 0) _idx = 0;\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, _idx++));\n  let vdom = node;\n  if (node && typeof (node.tag) === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent) vdom = render(node, parent, _idx++);\n  if (vdom && vdom.children) vdom.children = vdom.children.map(child => createComponent(child, parent, _idx++));\n  return vdom;\n }\n\nexport default createComponent;\n","import createComponent from './createComponent';\nimport { VNode } from './types';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) {\n    return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  }\n  else\n    return tag(props, ch);\n};\n\nconst keyCache = {};\n\nexport const updateElement = render;\n\nexport function render(element: Element, nodes: VNode | VNode[], parent = {}) {\n  // console.log('render', element, node);\n  // tslint:disable-next-line\n  if (nodes == null) return;\n\n  nodes = createComponent(nodes, parent);\n\n  if (!element) return;\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes);\n  } else {\n    updateChildren(element, [nodes]);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode) {\n  console.assert(!!element);\n  //console.log('update', element, node);\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node), element);\n    return;\n  }\n  updateChildren(element, node.children);\n  updateProps(element, node.props);\n}\n\nfunction updateChildren(element, children) {\n  const len = Math.min(element.childNodes.length, children.length);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    const el = element.childNodes[i];\n    if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.textContent = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child);\n        } else {\n          const old = keyCache[key];\n          if (old) {\n            element.insertBefore(old, el);\n            element.appendChild(el);\n            update(element.childNodes[i], child);\n          } else {\n            element.insertBefore(create(child), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child);\n      }\n    }\n  }\n\n  let n = element.childNodes.length;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (children.length > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i]));\n    }\n    element.appendChild(d);\n  }\n}\n\nfunction createText(node) {\n  if (node.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node);\n  }\n}\n\nfunction create(node: VNode | string, isSvg = false): Element {\n  console.assert(node !== null && node !== undefined);\n  // console.log('create', node, typeof node);\n\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props);\n\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nfunction updateProps(element: Element, props: {}) {\n  console.assert(!!element);\n  // console.log('updateProps', element, props);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      for (const s in value) {\n        if (element.style[s] !== value[s]) element.style[s] = value[s];\n      }\n    } else if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'class' || name.startsWith(\"role\") || name.indexOf(\"-\") > 0 ||\n      element instanceof SVGElement || element.tagName.indexOf('-') > 0) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n      element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n}\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}","export const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    app.webComponent(name, constructor)\n    return constructor;\n  }\n}\n\n","const getStateValue = (component, name) => {\n  return name ? component['state'][name] : component['state'];\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = { ...component['state'] };\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nexport default (key: string, props: [], tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['selectedIndex'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.selectedIndex);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = {};\r\napp.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T=any, E=any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n\r\n  render(element: HTMLElement, node) {\r\n    app.render(element, node, this);\r\n  }\r\n\r\n  private renderState(state: T) {\r\n    if (!this.view) return;\r\n    const h = app.createElement;\r\n    app.createElement = (tag, props, ...children) => {\r\n      props && Object.keys(props).forEach(key => {\r\n        if (key.startsWith('$')) {\r\n          directive(key, props, tag, this);\r\n          delete props[key];\r\n        }\r\n      });\r\n      return h(tag, props, ...children);\r\n    }\r\n    const html = this.view(state);\r\n    app.createElement = h;\r\n\r\n    app.run('debug', {\r\n      component: this,\r\n      state,\r\n      vdom: html || '[vdom is null - no render]',\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string') ?\r\n      document.getElementById(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          const observer = new MutationObserver(changes => {\r\n            const { removedNodes, oldValue } = changes[0];\r\n            if (oldValue === this.tracking_id || Array.from(removedNodes).indexOf(el) >= 0) {\r\n              this.unload();\r\n              observer.disconnect();\r\n            }\r\n          });\r\n          if (el.parentNode) observer.observe(el.parentNode, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    this.render(el, html);\r\n    if (this.rendered) (this.rendered(this.state));\r\n  }\r\n\r\n  public setState(state: T, options: { render: boolean, history: boolean, callback?}\r\n    = { render: true, history: false}) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      state.then(s => {\r\n        this.setState(s, options)\r\n      }).catch(err => {\r\n        console.error(err);\r\n        throw err;\r\n      });\r\n      this._state = state;\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) this.renderState(state);\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null,\r\n    options: { render?: boolean, history?, global_event?: boolean } = { render: true }): Component<T> => {\r\n    return this.mount(element, { ...options, render: true });\r\n  }\r\n\r\n  public mount(element = null, options?: { render?: boolean, history?, global_event?: boolean}) {\r\n\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      const prev = () => {\r\n        this._history_idx --;\r\n        if (this._history_idx >=0) {\r\n          this.setState(this._history[this._history_idx], { render: true, history: false });\r\n        }\r\n        else {\r\n          this._history_idx = 0;\r\n        }\r\n      };\r\n\r\n      const next = () => {\r\n        this._history_idx ++;\r\n        if (this._history_idx < this._history.length) {\r\n          this.setState(this._history[this._history_idx], { render: true, history: false });\r\n        }\r\n        else {\r\n          this._history_idx = this._history.length - 1;\r\n        }\r\n      };\r\n      this.on(options.history.prev || 'history-prev', prev)\r\n      this.on(options.history.next || 'history-next', next)\r\n    }\r\n    this.add_actions();\r\n    if (this.state === undefined) this.state = this['model'] != null ? this['model'] : {};\r\n    if (options.render) {\r\n      this.setState(this.state, { render: true, history: true });\r\n    } else {\r\n      this.setState(this.state, { render: false, history: true });\r\n    }\r\n\r\n    componentCache[element] = componentCache[element] || [];\r\n    componentCache[element].push(this);\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (name.startsWith('#') || name.startsWith('/'));\r\n  }\r\n\r\n  add_action(name: string, action, options: any = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    this.on(name as any, (...p) => {\r\n      const newState = action(this.state, ...p);\r\n\r\n      app.run('debug', {\r\n        component: this,\r\n        'event': name,\r\n        e: p,\r\n        state: this.state,\r\n        newState,\r\n        options\r\n      })\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.global_event || this.is_global_event(name) ?\r\n      app.run(name, ...args) :\r\n      this._app.run(name, ...args);\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.global_event || this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public unmount() {\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.global_event || this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","declare var customElements;\n\nexport const customElement = (componentClass, options = {}) => class extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    return { ...options }['observedAttributes'];\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = { render: true, shadow: false, ...options };\n      this._shadowRoot = opts.shadow ?\n        this.attachShadow({ mode: 'open' }) : this;\n      const props = {}\n      Array.from(this.attributes).forEach(item => props[item.name] = item.value);\n      if (this.children) {\n        props['children'] = Array.from(this.children);\n        props['children'].forEach(el => el.parentElement.removeChild(el));\n      }\n      this._component = new componentClass(props).mount(this._shadowRoot, opts);\n      this.on = this._component.on.bind(this._component);\n      this.run = this._component.run.bind(this._component);\n    }\n  }\n\n  disconnectedCallback() {\n    this._component.unmount();\n    this._component = null;\n  }\n\n  attributeChangedCallback(...args) {\n    this._component && this._component.run('attributeChanged', ...args);\n  }\n}\n\nexport default (name: string, componentClass, options?) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app from './app';\nimport { createElement, render, Fragment } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E=any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: { history?, rendered?: (state: T) => void}): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: HTMLElement, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?): void;\n}\n\napp.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\n\napp.start = <T, E=any>(element?: HTMLElement | string, model?: T,  view?: View<T>, update?: Update<T, E>,\n  options?: { history?, rendered?: (state: T) => void }) : Component<T, E> => {\n    const opts = {...options, render: true, global_event: true };\n    const component = new Component<T, E>(model, view, update);\n    if (options && options.rendered) component.rendered = options.rendered;\n    component.mount(element, opts);\n    return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      route(location.hash);\n    }\n  });\n}\n\nexport type StatelessComponent<T={}> = (args: T) => string | VNode | void;\nexport { app, Component, View, Action, Update, on, update, customElement };\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['React'] = app;\n}\n\n\n","import { createElement, updateElement, Fragment } from './vdom-my';\nexport function render(element, html, parent?) {\n  updateElement(element, html, parent);\n}\nexport { createElement, Fragment };\n\n\n","import app from 'apprun';\r\nimport router from './router';\r\nexport default {\r\n    start: (config) => {\r\n        router(config.eventRoot);\r\n        app.render(document.body, app.createElement(config.layout, Object.assign({}, config)));\r\n        const element = document.getElementById(config.element);\r\n        config.pages.forEach(def => {\r\n            const [e, Comp] = def;\r\n            const component = new Comp().mount(element);\r\n            app.on(e, (...p) => component.run('.', ...p));\r\n        });\r\n    }\r\n};\r\n","import app from 'apprun';\r\nexport default (root = '#') => {\r\n    const route = (url, e) => {\r\n        e && e.preventDefault();\r\n        url = url.replace(/\\/$/, \"\");\r\n        url = url || root;\r\n        if (!app.run(url))\r\n            app.run(`${root}_404`);\r\n    };\r\n    if (root.startsWith('#'))\r\n        app.on('///', () => app.run(`${root}_404`));\r\n    if (root.startsWith('/')) {\r\n        document.addEventListener(\"DOMContentLoaded\", () => {\r\n            window.onpopstate = () => route(location.pathname);\r\n            route(location.pathname);\r\n        });\r\n        window.onclick = e => linkClick(e);\r\n        const linkClick = e => {\r\n            const menu = e.target;\r\n            let url = menu.href;\r\n            if (url && url.startsWith(document.location.origin)) {\r\n                e.preventDefault();\r\n                history.pushState(null, \"\", menu.pathname);\r\n                route(menu.pathname);\r\n            }\r\n        };\r\n    }\r\n};\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { app, Component, customElement } from 'apprun';\r\nlet Img = class Img extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = ({ src }) => app.createElement(\"img\", { src: src });\r\n    }\r\n};\r\nImg = __decorate([\r\n    customElement('my-img')\r\n], Img);\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { app, Component, customElement } from 'apprun';\r\nlet default_1 = class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {};\r\n        this.view = (state) => app.createElement(app.Fragment, null,\r\n            app.createElement(\"div\", null,\r\n                app.createElement(\"button\", { \"$onclick\": 'fetchComic' }, \"XKCD\")),\r\n            state.loading ? app.createElement(\"div\", null, \"loading ... \") : '',\r\n            state.comic && app.createElement(app.Fragment, null,\r\n                app.createElement(\"h3\", null, state.comic.title),\r\n                app.createElement(\"img\", { src: state.comic.url })));\r\n        this.update = {\r\n            'loading': (state, loading) => (Object.assign({}, state, { loading })),\r\n            'fetchComic': async (_) => {\r\n                this.run('loading', true);\r\n                const response = await fetch('https://xkcd-imgs.herokuapp.com/');\r\n                const comic = await response.json();\r\n                return { comic };\r\n            }\r\n        };\r\n    }\r\n};\r\ndefault_1 = __decorate([\r\n    customElement('my-xkcd')\r\n], default_1);\r\nexport default default_1;\r\n","import app from './_site/index';\r\nimport './components/my-img';\r\nimport './components/my-xkcd';\r\nimport layout from './layout';\r\nimport pages from './_lib/index';\r\nconst nav = [\r\n    { \"text\": \"Home\", \"link\": \"/\" }\r\n];\r\nconst links = [\r\n    { \"link\": \"#\", \"text\": \"Introduction\" },\r\n    { \"link\": \"#how-it-works\", \"text\": \"How It Works\" },\r\n    { \"link\": \"#getting-started\", \"text\": \"Getting Started\" },\r\n    { \"link\": \"#configuration\", \"text\": \"Configuration\" },\r\n    { \"link\": \"#configuration_layout\", \"text\": \"Switch Layout\" },\r\n    { \"link\": \"#configuration_diy\", \"text\": \"Do It Yourself\" },\r\n    { \"link\": \"#components\", \"text\": \"Components\" },\r\n    { \"link\": \"#web-components\", \"text\": \"Web-components\" },\r\n    { \"link\": \"#fetch\", \"text\": \"Async Fetch\" },\r\n    { \"link\": \"#pwa\", \"text\": \"PWA\" },\r\n    { \"link\": \"#esm\", \"text\": \"Dynamic Modules\" },\r\n    { \"link\": \"#deploy\", \"text\": \"Build and Deploy\" },\r\n    { \"link\": \"#todo\", \"text\": \"Todo *\" },\r\n    { \"link\": \"#references\", \"text\": \"References\" },\r\n    { \"link\": \"\", \"text\": \"* working on docs\" }\r\n];\r\nconst config = {\r\n    title: 'AppRun Site',\r\n    element: 'main',\r\n    nav,\r\n    sidebar: links,\r\n    layout,\r\n    pages\r\n};\r\napp.start(config);\r\n","import app from 'apprun';\r\nexport default ({ title, element, nav, sidebar }) => app.createElement(app.Fragment, null,\r\n    app.createElement(\"nav\", { class: \"main-nav\", markdown: \"0\" },\r\n        app.createElement(\"a\", { class: \"nav-title\", href: \"/\" }, title),\r\n        app.createElement(\"div\", { class: \"flex\" }),\r\n        nav.map(item => app.createElement(\"a\", { class: \"nav-item\", href: item.link }, item.text)),\r\n        app.createElement(\"a\", { class: \"icon\", href: \"https://github.com/yysun/apprun-site\", title: \"GitHub\" },\r\n            app.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", width: \"24\", height: \"24\", fill: \"currentcolor\" },\r\n                app.createElement(\"path\", { d: \"M12,2C6.48,2,2,6.59,2,12.25c0,4.53,2.87,8.37,6.84,9.73c0.5,0.09,0.68-0.22,0.68-0.49c0-0.24-0.01-0.89-0.01-1.74c-2.78,0.62-3.37-1.37-3.37-1.37c-0.45-1.18-1.11-1.5-1.11-1.5c-0.91-0.64,0.07-0.62,0.07-0.62c1,0.07,1.53,1.06,1.53,1.06c0.89,1.57,2.34,1.11,2.91,0.85c0.09-0.66,0.35-1.11,0.63-1.37c-2.22-0.26-4.56-1.14-4.56-5.07c0-1.12,0.39-2.03,1.03-2.75c-0.1-0.26-0.45-1.3,0.1-2.71c0,0,0.84-0.28,2.75,1.05c0.8-0.23,1.65-0.34,2.5-0.34c0.85,0,1.7,0.12,2.5,0.34c1.91-1.33,2.75-1.05,2.75-1.05c0.55,1.41,0.2,2.45,0.1,2.71c0.64,0.72,1.03,1.63,1.03,2.75c0,3.94-2.34,4.81-4.57,5.06c0.36,0.32,0.68,0.94,0.68,1.9c0,1.37-0.01,2.48-0.01,2.81c0,0.27,0.18,0.59,0.69,0.49c3.97-1.36,6.83-5.2,6.83-9.73C22,6.59,17.52,2,12,2\" })))),\r\n    app.createElement(\"main\", { class: \"wrapper\" },\r\n        app.createElement(\"nav\", { class: \"side-nav\" },\r\n            app.createElement(\"button\", { id: \"toggleNavButton\" }, \"Menu\"),\r\n            app.createElement(\"ul\", null, sidebar.map(item => app.createElement(\"li\", null,\r\n                app.createElement(\"a\", { href: item.link }, item.text))))),\r\n        app.createElement(\"article\", { id: element })));\r\n","// this file is auto-generated\r\nimport _components_md_0 from './components_md';\r\nimport _diy_md_1 from './configuration/diy_md';\r\nimport _index_md_2 from './configuration/index_md';\r\nimport _layout_md_3 from './configuration/layout_md';\r\nimport _firebase_md_4 from './deploy/firebase_md';\r\nimport _github_md_5 from './deploy/github_md';\r\nimport _index_md_6 from './deploy/index_md';\r\nimport _esm_md_7 from './esm_md';\r\nimport _faq_md_8 from './faq_md';\r\nimport _fetch_md_9 from './fetch_md';\r\nimport _getting_started_md_10 from './getting-started_md';\r\nimport _how_it_works_md_11 from './how-it-works_md';\r\nimport _index_md_12 from './index_md';\r\nimport _pwa_md_13 from './pwa_md';\r\nimport _references_md_14 from './references_md';\r\nimport _todo_md_15 from './todo_md';\r\nimport _html_html_16 from './web-components/html_html';\r\nimport _index_md_17 from './web-components/index_md';\r\nimport _tsx_18 from './web-components/tsx_tsx';\r\nimport _index_19 from './_404/index_tsx';\r\nexport default [\r\n    [\"#components\", _components_md_0],\r\n    [\"#configuration_diy\", _diy_md_1],\r\n    [\"#configuration\", _index_md_2],\r\n    [\"#configuration_layout\", _layout_md_3],\r\n    [\"#deploy_firebase\", _firebase_md_4],\r\n    [\"#deploy_github\", _github_md_5],\r\n    [\"#deploy\", _index_md_6],\r\n    [\"#esm\", _esm_md_7],\r\n    [\"#faq\", _faq_md_8],\r\n    [\"#fetch\", _fetch_md_9],\r\n    [\"#getting-started\", _getting_started_md_10],\r\n    [\"#how-it-works\", _how_it_works_md_11],\r\n    [\"#\", _index_md_12],\r\n    [\"#pwa\", _pwa_md_13],\r\n    [\"#references\", _references_md_14],\r\n    [\"#todo\", _todo_md_15],\r\n    [\"#web-components_html\", _html_html_16],\r\n    [\"#web-components\", _index_md_17],\r\n    [\"#web-components_tsx\", _tsx_18],\r\n    [\"#_404\", _index_19],\r\n];\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"components\">Components</h1>\n<p>Components are the application building blocks in AppRun applications. Components provide a local scope to the elm like architecture, which means inside a component, there are <em>state</em>, <em>view</em>, and <em>update</em>.</p>\n<p>The the <em>state</em>, <em>view</em>, and <em>update</em> are provided to AppRun, AppRun registers the event handlers defined in the update and waits for AppRun events to start the <a href=\"https://apprun.js.org/docs/index.html#/04-architecture#apprun-event-life-cycle\">event life cycle</a>.</p>\n<h2 id=\"use-components-for-pages\">Use Components for Pages</h2>\n<h3 id=\"apprun-components\">AppRun Components</h3>\n<p>It is straightforward to create AppRun components as AppRun Site pages. You create a component class around the <em>state</em>, <em>view</em>, and <em>update</em>.</p>\n<pre><code class=\"language-javascript\">import {app, Component} from 'apprun';\n\nclass About extends Component {\n  state = 'about page';\n  view = state =&gt; &lt;div/&gt;;\n  update = {};\n}\n</code></pre>\n<h3 id=\"html-components\">HTML Components</h3>\n<p>In additional to AppRun components, you can create HTML files inside the <strong>src/pages</strong> directory. They are converted into AppRun components by the <em>npx apprun-site build</em> command.</p>\n<p>E.g. if you have an <em>a.html</em> file</p>\n<pre><code class=\"language-html\">&lt;h1&gt;Hello World&lt;/h1&gt;\n</code></pre>\n<p>It will be converted into a component.</p>\n<pre><code class=\"language-javascript\">import { app, Component } from 'apprun';\nexport default class extends Component {\n  view = _ =&gt; '_html:&lt;h1&gt;Hello World&lt;/h1&gt;';\n}\n</code></pre>\n<h3 id=\"markdown-components\">Markdown Components</h3>\n<p>you can also create markdown files inside the <strong>src/pages</strong> directory. They are converted into AppRun components by the <em>npx apprun-site build</em> command.</p>\n<p>E.g. if you have an <em>a.md</em> file</p>\n<pre><code class=\"language-markdown\"># Hello World\n</code></pre>\n<p>It will be converted into a component.</p>\n<pre><code class=\"language-javascript\">import { app, Component } from 'apprun';\nexport default class extends Component {\n  view = _ =&gt; '_html:&lt;h1&gt;Hello World&lt;/h1&gt;';\n}\n</code></pre>\n<p>All components inside the <strong>src/pages</strong> directory are activated/routed using the events.</p>\n<h2 id=\"routing\">Routing</h2>\n<p>AppRun router detects the hash changes in URL (by listening to the window's onpopstate event) and publishes the AppRun events using the hash as the event name.</p>\n<p>E.g., when URL in the browser address bar becomes http://..../about, AppRun publishes the <em>/about</em> event. The About component reacts to the <em>/about</em> and renders itself to the screen.</p>\n<p>Pages components subscribe to the routing events. That's it. There is no other code for routing.</p>\n<p>Each component also has a built-in <em>. event</em> that to display itself to the mounted elements. It provides the opportunity to scan the <strong>src/pages</strong> directory and create the event-component mapping, and to have a centralized place to map routing events to the page components in AppRun Site apps.</p>\n<h3 id=\"routing-with-hash-(%23)\">Routing with Hash (#)</h3>\n<p>By default, AppRun Site uses the hash sign for routing. E.g.,  URL http://..../#about triggers the <em>#about</em> event and then wakes up the <em>About</em> component.</p>\n<h3 id=\"routing-with-pretty-links-(%2F)\">Routing with Pretty Links (/)</h3>\n<p>You can also use pretty links (i.e. non hash links) and have HTML5 browser history. To enable this feature, just set the _eventRoot in the configuration.</p>\n<pre><code class=\"language-javascript\">import app from 'apprun-site';\n\nconst site = {\n  title: 'My AppRun Site',\n  // ...\n  eventRoot: '/'\n};\n\napp.start(site);\n</code></pre>\n<p>Also, you need to setup the web server to have the 404 fallback page to be the <em>index.htm</em> in case users hard refresh the pages.</p>\n<h2 id=\"components-composition\">Components Composition</h2>\n<p>You can include components inside components to compose you app.</p>\n<pre><code class=\"language-javascript\">class Child extends Component {\n  state = {}\n  view = state =&gt; &lt;div&gt;&lt;/div&gt;\n  update = {}\n}\n\nclass Parent extends Component {\n  state = {}\n  view = state =&gt; &lt;div&gt;\n    &lt;Child /&gt;\n  &lt;/div&gt;\n  update = {}\n}\n</code></pre>\n<p>To summarize, using components is a technique to decompose the large system into smaller, manageable, and reusable pieces. Pages are components inside the <strong>src/pages</strong> directory. They are auto indexed and built into the application.</p>\n<p>You can put non-page components inside the <strong>src/components</strong> directory. And import them where needed.</p>\n<h2 id=\"web-components\">Web Components</h2>\n<p>Components can be easily turned into <a href=\"#web-components\">web components</a> and use in the HTML pages and markdown pages.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"do-it-youself\">Do It Youself</h1>\n<p>Instead of following the out-of-box configuration schema, you can create the <strong>src/index.tsx</strong> of your own without using the <strong>app.start</strong> function.</p>\n<p>In this case, you will need to know how to create the layout, pages, and components, which is easy to do.</p>\n<h2 id=\"create-layout\">Create Layout</h2>\n<p>You can create the layout as a regular <a href=\"#component\">component</a> and render it before rendering pages. You can set up title, menus and nav whatever you want freely. A layout template looks like:</p>\n<pre><code class=\"language-javascript\">import app from 'apprun';\n\nexport default ({ title, element, nav, sidebar }) =&gt; &lt;&gt;\n  &lt;div id=&quot;main&quot;&gt;&lt;div&gt;\n&lt;/&gt;\n</code></pre>\n<h2 id=\"create-pages\">Create Pages</h2>\n<p>The auto generated event-component mapping in <strong>src/_lib/index.tsx</strong> makes it very easy to create the pages, and sets the routing events to the pages in a generic way.</p>\n<pre><code class=\"language-javascript\">const element = 'main';\npages.forEach(def =&gt; {\n  const [e, Comp] = def;\n  const component = new Comp().mount(element);\n  app.on(e, (...p) =&gt; component.run('.', ...p));\n});\n</code></pre>\n<blockquote>\n<p>Note: the . event is the <em>refresh</em> event built-in every AppRun component. It makes components render themselves.</p>\n</blockquote>\n<h2 id=\"your-own-index-page\">Your Own Index Page</h2>\n<p>A simple index page looks like:</p>\n<pre><code class=\"language-javascript\">import app from 'apprun';\nimport layout from './my-layout';\nimport pages from './_lib';\n\napp.render(document.body, &lt;layout /&gt;);\nconst element = 'main';\npages.forEach(def =&gt; {\n  const [e, Comp] = def;\n  const component = new Comp().mount(element);\n  app.on(e, (...p) =&gt; component.run('.', ...p));\n});\n</code></pre>\n<p>Next, you can learn how to create pages using <a href=\"#components\">components</a>.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"configuration\">Configuration</h1>\n<p>An SPA usually has a layout, which includes a header, a top nav, a sidebar, a footer, and the main area for displaying the pages.</p>\n<p>You can pass a configuration object to the <strong>app.start</strong> function to</p>\n<ul>\n<li>Set page title in the layout</li>\n<li>Set the main element Id for displaying the pages</li>\n<li>Set nav bar menus</li>\n<li>Set sidebar menus</li>\n<li>Set the layout component</li>\n<li>Set the pages, which is the auto-generated event-component mapping</li>\n</ul>\n<pre><code class=\"language-javascript\">import app from 'apprun-site';\nimport layout from './layout';\nimport pages from './_lib';\nconst nav = [\n  { &quot;text&quot;: &quot;Home&quot;, &quot;link&quot;: &quot;/&quot; },\n  { &quot;text&quot;: &quot;Contact&quot;, &quot;link&quot;: &quot;/contact&quot; },\n  { &quot;text&quot;: &quot;About&quot;, &quot;link&quot;: &quot;/about&quot; }\n];\nconst config = {\n  title: 'My AppRun Site',\n  element: 'main',\n  nav,\n  sidebar: nav,\n  layout,\n  pages\n};\n\napp.start(site);\n</code></pre>\n<p>The <em>npx apprun-site init</em> command creates four out-of-box layouts.</p>\n<ul>\n<li>Default - best for documentation site</li>\n<li>Bootstrap - start point of bootstrap</li>\n<li>CoreUI - best for admin UI / business apps</li>\n<li>Material Design - best for mobile web app</li>\n</ul>\n<p>They all follow the configuration schema to render the page accordingly.</p>\n<p>You can learn how to <a href=\"#configuration_layout\">use and switch layouts</a>.</p>\n<p>If you want to use your own layout, you can use the <a href=\"#configuration_diy\">do it yourself</a> approach.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"layouts\">Layouts</h1>\n<p>There are four layouts included.</p>\n<ul>\n<li>Default - best for documentation site</li>\n<li>Bootstrap - start point of bootstrap</li>\n<li>CoreUI - best for admin UI / business apps</li>\n<li>Material Design - best for mobile web app</li>\n</ul>\n<p>You can rename the layout folder to choose layout.</p>\n<h3 id=\"switch-layouts\">Switch Layouts</h3>\n<p>You can rename the layout directory to switch the layouts.</p>\n<ul>\n<li>\n<p>To use the bootstrap layout, rename <em>layout-bootstrap</em> to <em>layout</em></p>\n</li>\n<li>\n<p>To use the coreUI layout, rename <em>layout-coreui</em> to <em>layout</em></p>\n</li>\n<li>\n<p>To use the material layout, rename <em>layout-material</em> to <em>layout</em></p>\n</li>\n</ul>\n<h2 id=\"don't-like-any-of-them%3F\">Don't Like Any of Them?</h2>\n<p>Understand, you can <a href=\"#configuration_diy\">do it yourself</a> easily.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"firebase-hosting\">Firebase Hosting</h1>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"github-pages\">Github Pages</h1>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"build-and-deploy\">Build and Deploy</h1>\n<h2 id=\"build\">Build</h2>\n<p>AppRun Site provides all you need to use the bundled script file and dynamic ES modules loading.</p>\n<ul>\n<li>\n<p>The <em>npx apprun-site build</em> command creates the event-component-module mapping.</p>\n</li>\n<li>\n<p>The <em>npx apprun-site fix-esm</em> command prepares the global modules for the browsers.</p>\n</li>\n</ul>\n<p>The <em>npm script</em> in the AppRun Site app to compile and bundle is:</p>\n<pre><code class=\"language-sh\">npm run build\n</code></pre>\n<p>The <em>npm script</em> in the AppRun Site app to compile to ES modules is:</p>\n<pre><code class=\"language-sh\">npm run build:esm\n\n</code></pre>\n<p>All the code and assets are built into the <strong>public</strong> directory.</p>\n<h2 id=\"deploy\">Deploy</h2>\n<p>AppRun Site apps are client side apps. All code runs in the browsers. There is no server side app needed. The deployment is to copy the  <strong>public</strong> directory to the web server.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"javascript-modules\">JavaScript Modules</h1>\n<p>AppRun Site apps use components. Components are build and exported as modules. They are imported and bundled into the <strong>app.js</strong>.</p>\n<p>JavaScript/ECMAScript modules are now supported in all major browsers! You can serve the modules without bundling.</p>\n<h2 id=\"import-es-module-in-browser\">Import ES Module in Browser</h2>\n<p>The <strong>index.html</strong> below is pattern to serve both bundled JS file and the module files.</p>\n<pre><code class=\"language-javascript\">&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=&quot;utf-8&quot;&gt;\n  &lt;title&gt;My AppRun Site&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;script nomodule src=&quot;/app.js&quot;&gt;&lt;/script&gt;\n  &lt;script type=&quot;module&quot; src=&quot;/esm/index-esm.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<h2 id=\"build-the-modules\">Build the Modules</h2>\n<p>To build the modules, you can use TypeScript directly to compile source code from the <strong>sec</strong> directory to the <strong>public/esm</strong> directory.</p>\n<pre><code class=\"language-sh\">tsc -p src --outDir public/esm\n</code></pre>\n<h2 id=\"fix-the-global-imports\">Fix the Global Imports</h2>\n<p>However, there is still a problem. The browser does not how to import the global modules. E.g. All components import the global module <em>apprun</em>.</p>\n<pre><code class=\"language-javascript\">import { app, Component } from 'apprun';\nexport default class extends Component {\n  //\n}\n</code></pre>\n<p>The browser will refuse to load and report error:</p>\n<pre><code>Relative references must start with either &quot;/&quot;, &quot;./&quot;, or &quot;../&quot;.\n</code></pre>\n<p>Fortunately, AppRun Site provides a handy command <em>fix-esm</em> to fix the global modules.</p>\n<pre><code class=\"language-sh\">npx apprun-site fix-esm --source public/esm\n</code></pre>\n<p>The command does two things:</p>\n<ol>\n<li>\n<p>It copies the apprun.js from the <strong>node_modules</strong> directory to the <strong>public/esm/_modules</strong> directory.</p>\n</li>\n<li>\n<p>Fix the module references to use the newly copied file</p>\n</li>\n</ol>\n<pre><code class=\"language-javascript\">import { app, Component } from '/esm/_modules/apprun.js';\nexport default class extends Component {\n  //\n}\n</code></pre>\n<p>Problem solved!</p>\n<h2 id=\"dynamic-module-loading\">Dynamic Module Loading</h2>\n<p>ES module can be statically imported or dynamically imported. The main reason to use ES module in AppRun Site is to dynamically import the modules.</p>\n<p>Dynamic import is a JavaScript language feature that enables lazy-loading of modules. It introduces a new function-like form of import returns a promise of the requested modules that you can use to import modules when they are needed.</p>\n<p>E.g., the <em>about</em> component is only loaded when the <em>/about</em> routing event is published.</p>\n<pre><code class=\"language-javascript\">app.on('/about', (...p) =&gt; {\n  import('/esm/_lib/about_md.js').then((module) =&gt; {\n    const component = new module.default().mount('main');\n    component.run('.', ...p);\n  });\n});\n</code></pre>\n<h3 id=\"event-component-mapping-for-dynamic-import\">Event-Component Mapping for Dynamic Import</h3>\n<p>Remember the AppRun Site <em>build</em> command scans the <strong>src/pages</strong> directly and creates the <strong>src/_lib/index.tsx</strong> file that statically imports all the components and exports a mapping of events and components.</p>\n<p>the AppRun Site <em>build</em> command also creates the <strong>src/_lib/index-esm.tsx</strong> file, which includes the mapping between the routing events with the component and modules.</p>\n<pre><code class=\"language-javascript\">// this file is auto-generated\nexport default [\n  [&quot;/about&quot;, '_about_md_0', '/esm/_lib/about_md.js'],\n  [&quot;/contact&quot;, '_contact_1', '/esm/_lib/contact_tsx.js'],\n  [&quot;/home&quot;, '_home_2', '/esm/_lib/home_tsx.js'],\n  [&quot;/&quot;, '_index_3', '/esm/_lib/index_tsx.js'],\n  [&quot;/README&quot;, '_README_md_4', '/esm/_lib/README_md.js'],\n  [&quot;/_404&quot;, '_index_5', '/esm/_lib/_404/index_tsx.js'],\n]\n</code></pre>\n<p>You can use this mapping file to load component modules dynamically on demand.</p>\n<pre><code class=\"language-javascript\">import pages from './_lib/index-esm';\npages.forEach(def =&gt; {\n  let [evt, name, imp] = def;\n  app.on(evt, (...p) =&gt; {\n    import(imp).then((module) =&gt; {\n      const component = new module.default().mount('main');\n      component.run('.', ...p);\n    });\n  });\n});\n</code></pre>\n<p>Now, you have got the <a href=\"https://developers.google.com/web/fundamentals/performance/optimizing-javascript/code-splitting/\">code-splitting</a> feature to improve page-load times.</p>\n<p>You have both bundled and modularized app. Next, you will learn how to <a href=\"#deploy\">deploy</a> the app.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"faq\">FAQ</h1>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"async-fetch\">Async Fetch</h1>\n<p>AppRun supports asynchronous operations in the AppRun event handlers. We only need to add the async keyword in front of the event handlers. The event handlers can call the functions that return <em>Promise</em> with the await keyword.</p>\n<p>Using the async fetch, you can bring in data from other systems in to AppRun Site apps.</p>\n<p>See a component that displays the random XKCD pictures using async fetch from the <strong>src/components</strong> directory.</p>\n<p><my-xkcd></my-xkcd></p>\n<p>The code of the component is listed below.</p>\n<pre><code class=\"language-javascript\">import { app, Component, customElement } from 'apprun';\n\n@customElement('my-xkcd')\nexport default class extends Component {\n  state = {};\n\n  view = (state) =&gt; &lt;&gt;\n    &lt;div&gt;&lt;button $onclick='fetchComic'&gt;XKCD&lt;/button&gt;&lt;/div&gt;\n    {state.loading ? &lt;div&gt;loading ... &lt;/div&gt; : ''}\n    {state.comic &amp;&amp; &lt;&gt;\n      &lt;h3&gt;{state.comic.title}&lt;/h3&gt;\n      &lt;img src={state.comic.url} /&gt;\n    &lt;/&gt;}\n  &lt;/&gt;;\n\n  update = {\n    'loading': (state, loading) =&gt; ({ ...state, loading }),\n    'fetchComic': async _ =&gt; {\n      this.run('loading', true);\n      const response = await fetch('https://xkcd-imgs.herokuapp.com/');\n      const comic = await response.json();\n      return { comic };\n    }\n  };\n}\n</code></pre>\n<p>The fetch results can be cached by the service worker so that you can build a lightening fast app (even for dynamic content) that works offline.</p>\n<p>Learn how to make a <a href=\"#pwa\">Progress Web App</a>.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"getting-start\">Getting Start</h1>\n<p>To create an AppRun Site app:</p>\n<pre><code class=\"language-sh\">npx apprun-site init my-apprun-site\ncd my-apprun-site\nnpm install\n</code></pre>\n<p>The <strong>init</strong> command creates a project structure.</p>\n<pre><code>public/\nsrc/\n  layouts/\n  pages/\n    home.tsx\n    contact.tsx\n    about.tsx\n  index.tsx   &lt;=== main entry\n  tsconfig.json\n.gitignore\npackage.json\nwebpack.config.js\n</code></pre>\n<p>Use <em>npm start</em> to start the dev server and run the app in browser http://localhost:8080</p>\n<blockquote>\n<p>You can modify the home, contact and about components. Or add a few pages your own. The dev server will refresh to show your changes on the fly.</p>\n</blockquote>\n<p>The main entry point of the app is the <strong>src/index.tsx</strong>. It looks like:</p>\n<pre><code class=\"language-javascript\">import app from 'apprun-site';\nimport layout from './layout';\nimport pages from './_lib';\nconst nav = [\n  { &quot;text&quot;: &quot;Home&quot;, &quot;link&quot;: &quot;/&quot; },\n  { &quot;text&quot;: &quot;Contact&quot;, &quot;link&quot;: &quot;/contact&quot; },\n  { &quot;text&quot;: &quot;About&quot;, &quot;link&quot;: &quot;/about&quot; }\n];\n\nconst config = {\n  title: 'My AppRun Site',\n  element: 'main',\n  nav,\n  sidebar: nav,\n  layout,\n  pages\n};\n\napp.start(site);\n</code></pre>\n<p><strong>src/index.tsx</strong> imports the <em>app</em> object from <em>apprun.site</em> and calls the <em>app.start</em> function to start the app with the configuration options.</p>\n<p>Next, let's see how to <a href=\"#configuration\">configure</a>.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"how-it-works\">How It Works</h1>\n<p>AppRun Site apps are Single Page Applications (SPA). You develop the pages using AppRun components, HTML files and markdown files.</p>\n<p>You put AppRun components in the <em>pages</em> directory as following:</p>\n<pre><code>src/\n  pages/\n    home.tsx\n    contact.tsx\n    about.tsx\n</code></pre>\n<p>You then run the <em>build</em> script.</p>\n<pre><code class=\"language-sh\">npx apprun-site build\n</code></pre>\n<p>You can also run the <em>build</em> script in the watch mode.</p>\n<pre><code class=\"language-sh\">npx apprun-site build -w\n</code></pre>\n<blockquote>\n<p>If you have HTML files and markdown files in the <em>pages</em> directory, the <em>build</em> scripts converts them into AppRun components and saves to the <strong>src/_lib</strong> directory.</p>\n</blockquote>\n<p>The <em>build</em> scripts creates the <strong>src/_lib/index.tsx</strong> file that contains the routing events and the components.</p>\n<pre><code class=\"language-javascript\">// this file is auto-generated\nimport _about_0 from './about_tsx';\nimport _contact_1 from './contact_tsx';\nimport _home_2 from './home_tsx';\nexport default [\n  [&quot;/about&quot;, _about_0],\n  [&quot;/contact&quot;, _contact_1],\n  [&quot;/home&quot;, _home_2],\n] as (readonly [string, any])[];\n</code></pre>\n<p>The generated <strong>src/_lib/index.tsx</strong> imports the all components from <strong>src/_lib</strong> and <strong>src/pages</strong>; and exports an array that maps routing events to components.</p>\n<p>The event-component mapping from <strong>src/_lib/index.tsx</strong> is used to creates the pages, and sets the routing events in the main entry point of the application, <strong>src/index.tsx</strong>,</p>\n<p>Let's <a href=\"#getting-started\">Getting Started</a> to see it in action.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"apprun-site\">AppRun Site</h1>\n<h2 id=\"introduction\">Introduction</h2>\n<p><a href=\"https://apprun.js.org\">AppRun</a> is a Javascript library for building reliable, high-performance web applications using the Elm inspired Architecture, events, and components.</p>\n<p><strong><a href=\"https://yysun.github.io/apprun-site\">AppRun Site</a></strong> is a framework for building AppRun applications.</p>\n<h2 id=\"features\">Features</h2>\n<ul>\n<li>Progressive Web App (PWA) - support offline</li>\n<li>Single Page App (SPA) - routing using / or #</li>\n<li>4 built-in layouts and bring your own</li>\n<li>Compile html, markdown pages to AppRun components</li>\n<li>Auto generate the index of pages</li>\n<li>Build app logic using AppRun/Web components</li>\n<li>Targets ES5 or ES Module</li>\n<li>Extensible through plugins (WIP)</li>\n</ul>\n<h2 id=\"quick-start\">Quick Start</h2>\n<p>To create an AppRun Site:</p>\n<pre><code class=\"language-sh\">npx apprun-site init my-apprun-site\ncd my-apprun-site\nnpm install\n</code></pre>\n<p>Then, you can use:</p>\n<ul>\n<li>Use <em>npm start</em> to start the dev server</li>\n<li>Use <em>npm run build</em> to build for production</li>\n</ul>\n<h2 id=\"ready-for-more-information\">Ready for More Information</h2>\n<ul>\n<li>You can find out <a href=\"#how-it-works\">how it works</a>.</li>\n</ul>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"progressive-web-apps-(pwa)\">Progressive Web Apps (PWA)</h1>\n<p>AppRun Site includes the service worker from <a href=\"https://www.pwabuilder.com/\">PWA Builder</a>.</p>\n<p>The service worker improves the performance of your app, and make it work offline. The advanced caching service worker allows you to configure files and routes that are cached in different manners (pre-cache, network/server first, cache first, etc.).</p>\n<h2 id=\"register-the-service-worker\">Register the Service Worker</h2>\n<p>To register the service worker, include the script in the header section of the <strong>index.html</strong> file.</p>\n<pre><code>&lt;script src=&quot;sw-init.js&quot;&gt;&lt;/script&gt;\n</code></pre>\n<h2 id=\"configure-the-service-worker\">Configure the Service Worker</h2>\n<p>To configure the service worker, open and edit the <strong>sw.js</strong> file.</p>\n<pre><code class=\"language-javascript\">const CACHE = &quot;my-apprun-site&quot;;\nconst precacheFiles = [\n  &quot;index.html&quot;,\n  &quot;app.js&quot;,\n  &quot;style.css&quot;\n];\n\n// TODO: replace the following with the correct offline fallback page i.e.: const offlineFallbackPage = &quot;offline.html&quot;;\nconst offlineFallbackPage = &quot;offline.html&quot;;\n\nconst networkFirstPaths = [\n  /* Add an array of regex of paths that should go network first */\n  // Example: /\\/api\\/.*/\n];\n\nconst avoidCachingPaths = [\n  /* Add an array of regex of paths that shouldn't be cached */\n  // Example: /\\/api\\/.*/\n  /\\/sockjs-node\\/*/\n];\n\n</code></pre>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"references\">References</h1>\n<h2 id=\"init-command\">Init Command</h2>\n<pre><code>Usage:\n  $ npx apprun-site init [targetDir]\n\nOptions:\n  -r, --repo [repo]  repository, default: apprunjs/apprun-starter\n  -h, --help         Display this message\n  -v, --version      Display version number\n</code></pre>\n<h2 id=\"build-command\">Build Command</h2>\n<pre><code>Usage:\n  $ npx apprun-site build\n\nOptions:\n  -r, --root [root]         event root, default /, you can make it #\n  -s, --source [sourceDir]  source directory\n  -t, --target [targetDir]  target directory\n  -w, --watch               watch the folder\n  -V, --verbose             show verbose diagnostic information\n  -h, --help                Display this message\n  -v, --version             Display version number\n</code></pre>\n<h2 id=\"fix-esm-command\">Fix ESM Command</h2>\n<pre><code>Usage:\n  $ npx apprun-site fix-esm\n\nOptions:\n  -m, --modules &lt;modules&gt;    Choose a directory for global modules (default: _modules)\n  -V, --verbose             show verbose diagnostic information\n  -s, --source [sourceDir]  source directory\n  -h, --help                Display this message\n  -v, --version             Display version number\n</code></pre>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"todo\">Todo</h1>\n<ul>\n<li>Plugin Support</li>\n<li>Site Search</li>\n<li>GraphQL</li>\n</ul>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1>Web Component - HTML</h1>\r\n<div>You can use web components in HTML</div>\r\n<pre>\r\n    &lt;my-img src='logo.png'&gt;&lt;/my-img&gt;\r\n</pre>\r\n<my-img src='logo.png'></my-img>`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"web-components\">Web Components</h1>\n<p>Web components are custom elements in HTML.</p>\n<pre><code>&lt;my-img src='logo.png'&gt;&lt;/my-img&gt;\n</code></pre>\n<p>You can create web components out of AppRun components.</p>\n<pre><code class=\"language-javascript\">import {app, Component, customElement} from 'apprun';\n\n@customElement('my-img')\nexport default class extends Component {\n  view = ({ src }) =&gt; &lt;img src={src} /&gt;\n}\n</code></pre>\n<p>And then use it in <a href=\"#web-components_html\">HTML page</a>, or in <a href=\"#web-components_tsx\">JSX view</a> of AppRun components, or in markdown page like in this page.</p>\n<p>This page is a markdown page. It should display the web component.</p>\n<p><my-img src='logo.png'></my-img></p>\n`;\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = (state) => app.createElement(app.Fragment, null,\r\n            app.createElement(\"h1\", null, \"Web Component - tsx\"),\r\n            app.createElement(\"div\", null, \"You can use web components in the component's jsx view\"),\r\n            app.createElement(\"pre\", null, \"view = (state) => <my-img src='logo.png'></my-img>\"),\r\n            app.createElement(\"div\", null,\r\n                app.createElement(\"my-img\", { src: 'logo.png' })));\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = '404';\r\n        this.view = (state) => {\r\n            return app.createElement(\"div\", null, state);\r\n        };\r\n        this.update = [\r\n            ['.', state => state]\r\n        ];\r\n    }\r\n}\r\n"],"sourceRoot":""}
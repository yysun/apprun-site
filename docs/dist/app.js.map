{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../src/app.ts","webpack:///../src/createComponent.tsx","webpack:///../src/vdom-my.ts","webpack:///../src/web-component.ts","webpack:///../src/decorator.ts","webpack:///../src/directive.ts","webpack:///../src/component.ts","webpack:///../src/router.ts","webpack:///../src/apprun.ts","webpack:///../src/vdom.ts","webpack:///./src/_site/index.tsx","webpack:///./src/_site/router.tsx","webpack:///(webpack)/buildin/global.js","webpack:///./src/components/my-img.tsx","webpack:///./src/components/my-xkcd.tsx","webpack:///./src/_lib/components_md.tsx","webpack:///./src/_lib/configuration/diy_md.tsx","webpack:///./src/_lib/configuration/index_md.tsx","webpack:///./src/_lib/configuration/layout_md.tsx","webpack:///./src/_lib/deploy/firebase_md.tsx","webpack:///./src/_lib/deploy/github_md.tsx","webpack:///./src/_lib/deploy/index_md.tsx","webpack:///./src/_lib/esm_md.tsx","webpack:///./src/_lib/faq_md.tsx","webpack:///./src/_lib/fetch_md.tsx","webpack:///./src/_lib/getting-started_md.tsx","webpack:///./src/_lib/how-it-works_md.tsx","webpack:///./src/_lib/index_md.tsx","webpack:///./src/_lib/item_tsx.tsx","webpack:///./src/_lib/pages_md.tsx","webpack:///./src/_lib/pwa_md.tsx","webpack:///./src/_lib/references_md.tsx","webpack:///./src/_lib/routing_md.tsx","webpack:///./src/_lib/todo_md.tsx","webpack:///./src/_lib/web-components/html_html.tsx","webpack:///./src/_lib/web-components/index_md.tsx","webpack:///./src/_lib/web-components/tsx_tsx.tsx","webpack:///./src/_lib/_404/index_tsx.tsx","webpack:///./src/index.tsx","webpack:///./src/layout/index.tsx","webpack:///./src/_lib/index.tsx"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","App","[object Object]","this","_events","fn","options","push","subscribers","filter","sub","length","args","console","assert","delay","apply","once","on","_t","clearTimeout","setTimeout","app","self","global","_idx","ATTR_PROPS","collect","children","ch","forEach","Array","isArray","keyCache","updateElement","element","nodes","parent","createComponent","node","idx","map","child","vdom","getPrototypeOf","tag","__isAppRunComponent","props","id","Date","now","__componentCache","component","mount","mounted","state","Promise","view","_view","rendered","updateChildren","update","el","key1","nodeName","key2","toUpperCase","updateProps","parentNode","replaceChild","len","Math","min","childNodes","HTMLElement","insertBefore","textContent","nodeType","createText","old","appendChild","removeChild","lastChild","document","createDocumentFragment","indexOf","div","createElement","insertAdjacentHTML","substring","createTextNode","isSvg","SVGElement","JSON","stringify","createElementNS","oldProps","newProps","keys","style","cssText","startsWith","cname","replace","match","dataset","getAttribute","setAttribute","removeAttribute","customElement","componentClass","super","_component","observedAttributes","isConnected","opts","render","shadow","_shadowRoot","attachShadow","from","attributes","item","parentElement","run","unmount","customElements","Reflect","meta","WeakMap","metadataKey","metadataValue","target","has","set","constructor","webComponent","getStateValue","setStateValue","setState","event","e","handler","type","checked","Number","multiple","selected","componentCache","components","REFRESH","Component","_history_idx","_history","history","h","directive","html","getElementById","tracking_attr","unload","tracking_id","valueOf","toString","MutationObserver","observer","changes","removedNodes","oldValue","disconnect","observe","childList","subtree","attributeOldValue","attributeFilter","then","catch","err","error","_state","renderState","enable_history","callback","global_event","prev","_history_prev","next","_history_next","add_actions","_global_events","action","newState","actions","getMetadataKeys","getMetadata","all","act","split","trim","add_action","is_global_event","_app","_actions","off","route","url","rest","_","Error","Fragment","start","model","NOOP","addEventListener","onpopstate","location","hash","config","nav","pages","eventRoot","events","sort","b","preventDefault","params","pathname","onclick","linkClick","menu","href","origin","pushState","router","layout","body","assign","def","Comp","g","Function","arguments","src","decorators","desc","getOwnPropertyDescriptor","decorate","__decorate","default_1","loading","comic","title","async","response","fetch","json","sidebar","class","markdown","link","text","version","xmlns","width","height","fill"],"mappings":"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","file":"dist/app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","export class App {\n\n  private _events: Object;\n\n  public start;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: any = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn: fn, options: options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    let subscribers = this._events[name];\n    if (subscribers) {\n      subscribers = subscribers.filter((sub) => sub.fn !== fn);\n      if (subscribers.length) this._events[name] = subscribers;\n      else delete this._events[name]\n    }\n  }\n\n  run(name: string, ...args): number {\n    let subscribers = this._events[name];\n    console.assert(!!subscribers, 'No subscriber for event: ' + name);\n    if (subscribers) {\n      subscribers = subscribers.filter((sub) => {\n        const { fn, options } = sub;\n        if (options.delay) {\n          this.delay(name, fn, args, options);\n        } else {\n          fn.apply(this, args);\n        }\n        return !sub.options.once;\n      });\n      if (subscribers.length) this._events[name] = subscribers;\n      else delete this._events[name]\n    }\n\n    return subscribers ? subscribers.length : 0;\n  }\n\n  once(name: string, fn, options: any = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      fn.apply(this, args);\n    }, options.delay);\n  }\n}\n\nconst AppRunVersions = 'AppRun-2';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nfunction render(node, parent, idx) {\n  const { tag, props, children } = node;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  const key = `_${idx}`;\n\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component) {\n    component = parent.__componentCache[key] = new tag({ ...props, children }).mount(id);\n    component['__eid'] = id;\n  } else {\n    id = component['__eid'];\n  }\n  component.mounted && component.mounted(props, children);\n  const state = component.state;\n  let vdom = '';\n  if (!(state instanceof Promise) && component.view) {\n    vdom = component._view(state, props);\n    component.rendered && setTimeout(() => component.rendered(state, props));\n  }\n  return <section {...props} id={id}>{vdom}</section>;\n}\n\nlet _idx = 0;\nexport default function createComponent(node, parent, idx = 0) {\n  if (idx === 0) _idx = 0;\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, _idx++));\n  let vdom = node;\n  if (node && typeof (node.tag) === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent)\n    vdom = render(node, parent, _idx++);\n  if (vdom && Array.isArray(vdom.children))\n    vdom.children = vdom.children.map(child => createComponent(child, parent, _idx++));\n  return vdom;\n }\n","import createComponent from './createComponent';\nimport { VNode } from './types';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = {};\n\nexport const updateElement = render;\n\nexport function render(element: Element, nodes: VNode | VNode[], parent = {}) {\n  // console.log('render', element, node);\n  // tslint:disable-next-line\n  if (nodes == null) return;\n\n  nodes = createComponent(nodes, parent);\n\n  if (!element) return;\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes);\n  } else {\n    updateChildren(element, [nodes]);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode) {\n  console.assert(!!element);\n  //console.log('update', element, node);\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node), element);\n    return;\n  }\n  updateChildren(element, node.children);\n  updateProps(element, node.props);\n}\n\nfunction updateChildren(element, children) {\n  const len = Math.min(element.childNodes.length, children.length);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    const el = element.childNodes[i];\n    if (child instanceof HTMLElement) {\n      element.insertBefore(child, el);\n    }\n    else if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.textContent = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child);\n        } else {\n          const old = keyCache[key];\n          if (old) {\n            element.insertBefore(old, el);\n            element.appendChild(el);\n            update(element.childNodes[i], child);\n          } else {\n            element.insertBefore(create(child), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child);\n      }\n    }\n  }\n\n  let n = element.childNodes.length;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (children.length > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i]));\n    }\n    element.appendChild(d);\n  }\n}\n\nfunction createText(node) {\n  if (node.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node);\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg = false): Element {\n  console.assert(node !== null && node !== undefined);\n  // console.log('create', node, typeof node);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props);\n\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nfunction updateProps(element: Element, props: {}) {\n  console.assert(!!element);\n  // console.log('updateProps', element, props);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      for (const s in value) {\n        if (element.style[s] !== value[s]) element.style[s] = value[s];\n      }\n    } else if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'id' || name === 'class' || name.startsWith(\"role\") || name.indexOf(\"-\") > 0 ||\n      element instanceof SVGElement) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n        element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n}\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?, shadow?, history?, global_event?: boolean;\n  observedAttributes?: string[]\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    return { ...options }['observedAttributes'];\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = { render: true, shadow: false, ...options };\n      this._shadowRoot = opts.shadow ?\n        this.attachShadow({ mode: 'open' }) : this;\n      const props = {}\n      Array.from(this.attributes).forEach(item => props[item.name] = item.value);\n      const children = this.children ? Array.from(this.children) : [];\n      children.forEach(el => el.parentElement.removeChild(el));\n      this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n      this._component.mounted && this._component.mounted(props, children);\n      this.on = this._component.on.bind(this._component);\n      this.run = this._component.run.bind(this._component);\n    }\n  }\n\n  disconnectedCallback() {\n    this._component.unmount();\n    this._component = null;\n  }\n\n  attributeChangedCallback(...args) {\n    this._component && this._component.run('attributeChanged', ...args);\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = { ...component['state'] };\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nexport default (key: string, props: [], tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, EventOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = {};\r\napp.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T=any, E=any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n\r\n  render(element: HTMLElement, node) {\r\n    app.render(element, node, this);\r\n  }\r\n\r\n  private _view(state, p = null) {\r\n    if (!this.view) return;\r\n    const h = app.createElement;\r\n    app.createElement = (tag, props, ...children) => {\r\n      props && Object.keys(props).forEach(key => {\r\n        if (key.startsWith('$')) {\r\n          directive(key, props, tag, this);\r\n          delete props[key];\r\n        }\r\n      });\r\n      return h(tag, props, ...children);\r\n    }\r\n    const html = p ? this.view(state, p) : this.view(state);\r\n    app.createElement = h;\r\n    return html;\r\n  }\r\n\r\n  private renderState(state: T) {\r\n    if (!this.view) return;\r\n    const html = this._view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      state,\r\n      vdom: html || '[vdom is null - no render]',\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string') ?\r\n      document.getElementById(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          const observer = new MutationObserver(changes => {\r\n            const { removedNodes, oldValue } = changes[0];\r\n            if (oldValue === this.tracking_id || Array.from(removedNodes).indexOf(el) >= 0) {\r\n              this.unload(this.state);\r\n              observer.disconnect();\r\n            }\r\n          });\r\n          if (el.parentNode) observer.observe(el.parentNode, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    this.render(el, html);\r\n    if (this.rendered) (this.rendered(this.state));\r\n  }\r\n\r\n  public setState(state: T, options: EventOptions\r\n    = { render: true, history: false}) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      state.then(s => {\r\n        this.setState(s, options)\r\n      }).catch(err => {\r\n        console.error(err);\r\n        throw err;\r\n      });\r\n      this._state = state;\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) this.renderState(state);\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null,\r\n    options: { render?: boolean, history?, global_event?: boolean } = { render: true }): Component<T> => {\r\n    return this.mount(element, { ...options, render: true });\r\n  }\r\n\r\n  public mount(element = null, options?: { render?: boolean, history?, global_event?: boolean}) {\r\n\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n    this.add_actions();\r\n    if (this.state === undefined) this.state = this['model'] != null ? this['model'] : {};\r\n    if (options.render) {\r\n      this.setState(this.state, { render: true, history: true });\r\n    } else {\r\n      this.setState(this.state, { render: false, history: true });\r\n    }\r\n\r\n    componentCache[element] = componentCache[element] || [];\r\n    componentCache[element].push(this);\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: EventOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this. _global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        'event': name,\r\n        e: p,\r\n        state: this.state,\r\n        newState,\r\n        options\r\n      })\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.is_global_event(name) ?\r\n      app.run(name, ...args) :\r\n      this._app.run(name, ...args);\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public unmount() {\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app from './app';\nimport { createElement, render, Fragment } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E=any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: { history?, rendered?: (state: T) => void}): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: HTMLElement, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n}\n\napp.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\n\napp.start = <T, E=any>(element?: HTMLElement | string, model?: T,  view?: View<T>, update?: Update<T, E>,\n  options?: { history?, rendered?: (state: T) => void }) : Component<T, E> => {\n    const opts = {...options, render: true, global_event: true };\n    const component = new Component<T, E>(model, view, update);\n    if (options && options.rendered) component.rendered = options.rendered;\n    component.mount(element, opts);\n    return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      route(location.hash);\n    }\n  });\n}\n\nexport type StatelessComponent<T={}> = (args: T) => string | VNode | void;\nexport { app, Component, View, Action, Update, on, update, EventOptions }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['React'] = app;\n}\n\n\n","import { createElement, updateElement, Fragment } from './vdom-my';\nexport function render(element, html, parent?) {\n  updateElement(element, html, parent);\n}\nexport { createElement, Fragment };\n\n\n","import app from 'apprun';\r\nimport router from './router';\r\nexport default {\r\n    start: (config) => {\r\n        if (!config)\r\n            config = { nav: [], pages: [], eventRoot: '/' };\r\n        router(config);\r\n        config.layout && app.render(document.body, app.createElement(config.layout, Object.assign({}, config)));\r\n        const element = config.element || document.body;\r\n        config.pages.forEach(def => {\r\n            const [e, Comp] = def;\r\n            const component = new Comp().mount(element);\r\n            app.on(e, (...p) => component.run('.', ...p));\r\n        });\r\n    }\r\n};\r\n","import app from 'apprun';\r\nexport default ({ eventRoot, pages }) => {\r\n    const root = eventRoot || '/';\r\n    const events = pages.map(p => {\r\n        const event = p[0].replace(/^\\/|\\#/, '');\r\n        return `${root}${event}/`;\r\n    }).sort((a, b) => b.split('/').length - a.split('/').length);\r\n    const route = (url, e) => {\r\n        e && e.preventDefault();\r\n        url = url.replace(/\\/$/, \"\") + '/';\r\n        let event = url;\r\n        for (let i = 0; i < events.length; i++) {\r\n            if (url.startsWith(events[i])) {\r\n                event = events[i];\r\n                break;\r\n            }\r\n        }\r\n        const params = url.replace(event, '').split('/').filter(p => p.length > 0);\r\n        event = event.replace(/\\/$/, '').substring(root.length);\r\n        event = root[0] + event;\r\n        if (!app.run(event, ...params))\r\n            app.run(`${root[0]}_404`);\r\n    };\r\n    app['route'] = route; // overwrite apprun's default router\r\n    if (root.startsWith('#')) {\r\n        document.addEventListener(\"DOMContentLoaded\", () => {\r\n            window.onpopstate = () => route(location.hash);\r\n            route(location.hash);\r\n        });\r\n    }\r\n    else if (root.startsWith('/')) {\r\n        document.addEventListener(\"DOMContentLoaded\", () => {\r\n            window.onpopstate = () => route(location.pathname);\r\n            route(location.pathname);\r\n        });\r\n        window.onclick = e => linkClick(e);\r\n        const linkClick = e => {\r\n            const menu = e.target;\r\n            let url = menu.href;\r\n            if (url && url.startsWith(document.location.origin)) {\r\n                e.preventDefault();\r\n                history.pushState(null, \"\", menu.pathname);\r\n                route(menu.pathname);\r\n            }\r\n        };\r\n    }\r\n};\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { app, Component, customElement } from 'apprun';\r\nlet Img = class Img extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = ({ src }) => app.createElement(\"img\", { src: src });\r\n    }\r\n};\r\nImg = __decorate([\r\n    customElement('my-img')\r\n], Img);\r\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { app, Component, customElement } from 'apprun';\r\nlet default_1 = class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {};\r\n        this.view = (state) => app.createElement(app.Fragment, null,\r\n            app.createElement(\"div\", null,\r\n                app.createElement(\"button\", { \"$onclick\": 'fetchComic' }, \"XKCD\")),\r\n            state.loading ? app.createElement(\"div\", null, \"loading ... \") : '',\r\n            state.comic && app.createElement(app.Fragment, null,\r\n                app.createElement(\"h3\", null, state.comic.title),\r\n                app.createElement(\"img\", { src: state.comic.url })));\r\n        this.update = {\r\n            'loading': (state, loading) => (Object.assign(Object.assign({}, state), { loading })),\r\n            'fetchComic': async (_) => {\r\n                this.run('loading', true);\r\n                const response = await fetch('https://xkcd-imgs.herokuapp.com/');\r\n                const comic = await response.json();\r\n                return { comic };\r\n            }\r\n        };\r\n    }\r\n};\r\ndefault_1 = __decorate([\r\n    customElement('my-xkcd')\r\n], default_1);\r\nexport default default_1;\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"components\">Components</h1>\n<p>Components are the application building blocks in AppRun applications. Using components is a technique to decompose the large system into smaller, manageable and reusable pieces.</p>\n<h2 id=\"create-components\">Create Components</h2>\n<p>Components provide a local scope to the elm like architecture, which means inside a component, there are <em>state</em>, <em>view</em>, and <em>update</em>.</p>\n<pre><code class=\"language-javascript\">import {app, Component} from 'apprun';\n\nexport default class extends Component {\n  state = '';\n  view = state =&gt; &lt;div&gt;{state}&lt;/div&gt;;\n  update = {};\n}\n</code></pre>\n<p>The <em>state</em>, <em>view</em>, and <em>update</em> are provided to AppRun, AppRun registers the event handlers defined in the update and waits for AppRun events to start the <a href=\"https://apprun.js.org/docs/index.html#/04-architecture#apprun-event-life-cycle\">event life cycle</a>.</p>\n<p>The three parts are all optional. Components can be as simple as only have the <em>view</em> function.</p>\n<pre><code class=\"language-javascript\">import {app, Component} from 'apprun';\n\nexport default class extends Component {\n  view = state =&gt; &lt;div&gt;{state}&lt;/div&gt;\n}\n</code></pre>\n<h2 id=\"component-composition\">Component Composition</h2>\n<p>You can create page components out of other non-page components.</p>\n<pre><code class=\"language-javascript\">class Child extends Component {\n  state = {}\n  view = state =&gt; &lt;div&gt;&lt;/div&gt;\n  update = {}\n}\n\nclass Page extends Component {\n  state = {}\n  view = state =&gt; &lt;div&gt;\n    &lt;Child /&gt;\n  &lt;/div&gt;\n  update = {}\n}\n</code></pre>\n<p>Usually non-page components are under the <strong>src/components</strong> directory. You import them where needed to compose your pages.</p>\n<h2 id=\"web-components\">Web Components</h2>\n<p>You can use AppRun components in HTML pages and markdown pages directly by making AppRun components into <a href=\"#web-components\">web components</a>.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"layout---do-it-yourself\">Layout - Do It Yourself</h1>\n<p>Instead of asking you to follow the configuration or convention, sometimes it is easier to create your own layout.</p>\n<p>You can create the <strong>src/index.tsx</strong> of your own without using the <strong>app.start</strong> function.</p>\n<p>In this case, you will need to know how to create the layout and pages in the <strong>src/index.tsx</strong> page.</p>\n<h2 id=\"create-layout\">Create Layout</h2>\n<p>You can create the layout as a regular <a href=\"#component\">component</a> and render it before rendering pages. You can set up title, menus, and nav whatever you want freely. A layout template looks like:</p>\n<pre><code class=\"language-javascript\">import app from 'apprun';\n\nexport default ({ title, element, nav, sidebar }) =&gt; &lt;&gt;\n  &lt;div id=&quot;main&quot;&gt;&lt;div&gt;\n&lt;/&gt;\n</code></pre>\n<h2 id=\"create-pages\">Create Pages</h2>\n<p>The auto-generated event-component mapping in <strong>src/_lib/index.tsx</strong> makes it very easy to create the pages, and sets the routing events to the pages in a generic way.</p>\n<pre><code class=\"language-javascript\">const element = 'main';\npages.forEach(def =&gt; {\n  const [e, Comp] = def;\n  const component = new Comp().mount(element);\n  app.on(e, (...p) =&gt; component.run('.', ...p));\n});\n</code></pre>\n<blockquote>\n<p>Note: the . event is the <em>refresh</em> event built-in every AppRun component. It makes components render themselves.</p>\n</blockquote>\n<h2 id=\"your-own-index-file\">Your Own Index File</h2>\n<p>Put them together a simple index page looks like:</p>\n<pre><code class=\"language-javascript\">import app from 'apprun';\nimport layout from './my-layout';\nimport pages from './_lib';\n\napp.render(document.body, &lt;layout /&gt;);\nconst element = 'main';\npages.forEach(def =&gt; {\n  const [e, Comp] = def;\n  const component = new Comp().mount(element);\n  app.on(e, (...p) =&gt; component.run('.', ...p));\n});\n</code></pre>\n<p>Next, you can learn more about the <a href=\"#pages\">pages</a>.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"configuration\">Configuration</h1>\n<p>A SPA usually has a layout, which includes a header, a top nav, a sidebar, a footer, and the main area for displaying the pages.</p>\n<p>You can pass a configuration object to the <strong>app.start</strong> function to</p>\n<ul>\n<li>Set page title in the layout</li>\n<li>Set the main element Id for displaying the pages</li>\n<li>Set nav bar menus</li>\n<li>Set sidebar menus</li>\n<li>Set the layout component</li>\n<li>Set the pages, which is the auto-generated event-component mapping</li>\n</ul>\n<pre><code class=\"language-javascript\">import app from 'apprun-site';\nimport layout from './layout';\nimport pages from './_lib';\nconst nav = [\n  { &quot;text&quot;: &quot;Home&quot;, &quot;link&quot;: &quot;/&quot; },\n  { &quot;text&quot;: &quot;Contact&quot;, &quot;link&quot;: &quot;/contact&quot; },\n  { &quot;text&quot;: &quot;About&quot;, &quot;link&quot;: &quot;/about&quot; }\n];\nconst config = {\n  title: 'My AppRun Site',\n  element: 'main',\n  nav,\n  sidebar: nav,\n  layout,\n  pages\n};\n\napp.start(site);\n</code></pre>\n<p>The <em>npx apprun-site init</em> command creates four out-of-box layouts.</p>\n<ul>\n<li>Default - best for the documentation site</li>\n<li>Bootstrap - start point of bootstrap</li>\n<li>CoreUI - best for admin UI / business apps</li>\n<li>Material Design - best for mobile web app</li>\n</ul>\n<p>They all follow the configuration schema to render the page accordingly.</p>\n<p>You can learn how to <a href=\"#configuration/layout\">use and switch layouts</a>.</p>\n<p>If you want to use your own layout, you can use the <a href=\"#configuration/diy\">do it yourself</a> approach.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"layouts\">Layouts</h1>\n<p>There are four layouts included.</p>\n<ul>\n<li>Default - best for the documentation site</li>\n<li>Bootstrap - start point of bootstrap</li>\n<li>CoreUI - best for admin UI / business apps</li>\n<li>Material Design - best for mobile web app</li>\n</ul>\n<p>You can rename the layout folder to choose a layout.</p>\n<h3 id=\"switch-layouts\">Switch Layouts</h3>\n<p>You can rename the layout directory to switch the layouts.</p>\n<ul>\n<li>\n<p>To use the bootstrap layout, rename <em>layout-bootstrap</em> to <em>layout</em></p>\n</li>\n<li>\n<p>To use the coreUI layout, rename <em>layout-coreui</em> to <em>layout</em></p>\n</li>\n<li>\n<p>To use the material layout, rename <em>layout-material</em> to <em>layout</em></p>\n</li>\n</ul>\n<h2 id=\"don't-like-any-of-them%3F\">Don't Like Any of them?</h2>\n<p>Understand, you can <a href=\"#configuration_diy\">do it yourself</a> easily.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"firebase-hosting\">Firebase Hosting</h1>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"github-pages\">Github Pages</h1>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"build-and-deploy\">Build and Deploy</h1>\n<h2 id=\"build\">Build</h2>\n<p>AppRun Site provides all you need to use the bundled script file and dynamic ES modules loading.</p>\n<ul>\n<li>\n<p>The <em>npx apprun-site build</em> command creates the event-component-module mapping.</p>\n</li>\n<li>\n<p>The <em>npx apprun-site fix-esm</em> command prepares the global modules for the browsers.</p>\n</li>\n</ul>\n<p>The <em>npm script</em> in the AppRun Site app to compile and bundle is:</p>\n<pre><code class=\"language-sh\">npm run build\n</code></pre>\n<p>The <em>npm script</em> in the AppRun Site app to compile to ES modules is:</p>\n<pre><code class=\"language-sh\">npm run build:esm\n\n</code></pre>\n<p>All the code and assets are built into the <strong>public</strong> directory.</p>\n<h2 id=\"deploy\">Deploy</h2>\n<p>AppRun Site apps are client-side apps. All code runs in the browsers. There is no server-side app needed. The deployment is to copy the  <strong>public</strong> directory to the web server.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"javascript-modules\">JavaScript Modules</h1>\n<p>AppRun Site apps use components. Components are build and exported as modules. They are imported and bundled into the <strong>app.js</strong>.</p>\n<p>JavaScript/ECMAScript modules are now supported in all major browsers! You can serve the modules without bundling.</p>\n<h2 id=\"import-es-module-in-browser\">Import ES Module in Browser</h2>\n<p>The <strong>index.html</strong> below is a pattern to serve both bundled JS file and the module files.</p>\n<pre><code class=\"language-javascript\">&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=&quot;utf-8&quot;&gt;\n  &lt;title&gt;My AppRun Site&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;script nomodule src=&quot;/app.js&quot;&gt;&lt;/script&gt;\n  &lt;script type=&quot;module&quot; src=&quot;/esm/index-esm.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<h2 id=\"build-the-modules\">Build the Modules</h2>\n<p>To build the modules, you can use TypeScript directly to compile source code from the <strong>sec</strong> directory to the <strong>public/esm</strong> directory.</p>\n<pre><code class=\"language-sh\">tsc -p src --outDir public/esm\n</code></pre>\n<h2 id=\"fix-the-global-imports\">Fix the Global Imports</h2>\n<p>However, there is still a problem. The browser does not how to import global modules. E.g., All components import the global module <em>apprun</em>.</p>\n<pre><code class=\"language-javascript\">import { app, Component } from 'apprun';\nexport default class extends Component {\n  //\n}\n</code></pre>\n<p>The browser will refuse to load and report error:</p>\n<pre><code>Relative references must start with either &quot;/&quot;, &quot;./&quot;, or &quot;../&quot;.\n</code></pre>\n<p>Fortunately, AppRun Site provides a handy command <em>fix-esm</em> to fix the global modules.</p>\n<pre><code class=\"language-sh\">npx apprun-site fix-esm --source public/esm\n</code></pre>\n<p>The command does two things:</p>\n<ol>\n<li>\n<p>It copies the apprun.js from the <strong>node_modules</strong> directory to the <strong>public/esm/_modules</strong> directory.</p>\n</li>\n<li>\n<p>Fix the module references to use the newly copied file</p>\n</li>\n</ol>\n<pre><code class=\"language-javascript\">import { app, Component } from '/esm/_modules/apprun.js';\nexport default class extends Component {\n  //\n}\n</code></pre>\n<p>Problem solved!</p>\n<h2 id=\"dynamic-module-loading\">Dynamic Module Loading</h2>\n<p>ES module can be statically imported or dynamically imported. The main reason to use the ES module in AppRun Site is to import the modules dynamically.</p>\n<p>Dynamic import is a JavaScript language feature that enables the lazy-loading of modules. It introduces a new function-like form of import returns a promise of the requested modules that you can use to import modules when they are needed.</p>\n<p>E.g., the <em>about</em> component is only loaded when the <em>/about</em> routing event is published.</p>\n<pre><code class=\"language-javascript\">app.on('/about', (...p) =&gt; {\n  import('/esm/_lib/about_md.js').then((module) =&gt; {\n    const component = new module.default().mount('main');\n    component.run('.', ...p);\n  });\n});\n</code></pre>\n<h3 id=\"event-component-mapping-for-dynamic-import\">Event-Component Mapping for Dynamic Import</h3>\n<p>Remember the AppRun Site <em>build</em> command scans the <strong>src/pages</strong> directly and creates the <strong>src/_lib/index.tsx</strong> file that statically imports all the components and exports a mapping of events and components.</p>\n<p>the AppRun Site <em>build</em> command also creates the <strong>src/_lib/index-esm.tsx</strong> file, which includes the mapping between the routing events with the component and modules.</p>\n<pre><code class=\"language-javascript\">// this file is auto-generated\nexport default [\n  [&quot;/about&quot;, '_about_md_0', '/esm/_lib/about_md.js'],\n  [&quot;/contact&quot;, '_contact_1', '/esm/_lib/contact_tsx.js'],\n  [&quot;/home&quot;, '_home_2', '/esm/_lib/home_tsx.js'],\n  [&quot;/&quot;, '_index_3', '/esm/_lib/index_tsx.js'],\n  [&quot;/README&quot;, '_README_md_4', '/esm/_lib/README_md.js'],\n  [&quot;/_404&quot;, '_index_5', '/esm/_lib/_404/index_tsx.js'],\n]\n</code></pre>\n<p>You can use this mapping file to load component modules dynamically on demand.</p>\n<pre><code class=\"language-javascript\">import pages from './_lib/index-esm';\npages.forEach(def =&gt; {\n  let [evt, name, imp] = def;\n  app.on(evt, (...p) =&gt; {\n    import(imp).then((module) =&gt; {\n      const component = new module.default().mount('main');\n      component.run('.', ...p);\n    });\n  });\n});\n</code></pre>\n<p>Now, you have got the <a href=\"https://developers.google.com/web/fundamentals/performance/optimizing-javascript/code-splitting/\">code-splitting</a> feature to improve page-load times.</p>\n<p>You have both bundled and modularized app. Next, you will learn how to <a href=\"#deploy\">deploy</a> the app.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"faq\">FAQ</h1>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"async-fetch\">Async Fetch</h1>\n<p>AppRun supports asynchronous operations in the AppRun event handlers. We only need to add the async keyword in front of the event handlers. The event handlers can call the functions that return <em>Promise</em> with the await keyword.</p>\n<p>Using the async fetch, you can bring in data from other systems into AppRun Site apps.</p>\n<p>See a component that displays the random XKCD pictures using async fetch from the <strong>src/components</strong> directory.</p>\n<p><my-xkcd></my-xkcd></p>\n<p>The code of the component is listed below.</p>\n<pre><code class=\"language-javascript\">import { app, Component, customElement } from 'apprun';\n\n@customElement('my-xkcd')\nexport default class extends Component {\n  state = {};\n\n  view = (state) =&gt; &lt;&gt;\n    &lt;div&gt;&lt;button $onclick='fetchComic'&gt;XKCD&lt;/button&gt;&lt;/div&gt;\n    {state.loading ? &lt;div&gt;loading ... &lt;/div&gt; : ''}\n    {state.comic &amp;&amp; &lt;&gt;\n      &lt;h3&gt;{state.comic.title}&lt;/h3&gt;\n      &lt;img src={state.comic.url} /&gt;\n    &lt;/&gt;}\n  &lt;/&gt;;\n\n  update = {\n    'loading': (state, loading) =&gt; ({ ...state, loading }),\n    'fetchComic': async _ =&gt; {\n      this.run('loading', true);\n      const response = await fetch('https://xkcd-imgs.herokuapp.com/');\n      const comic = await response.json();\n      return { comic };\n    }\n  };\n}\n</code></pre>\n<p>The fetch results can be cached by the service worker so that you can build a lightning fast app (even for dynamic content) that works offline.</p>\n<p>Learn how to make a <a href=\"#pwa\">Progress Web App</a>.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"getting-start\">Getting Start</h1>\n<p>To create an AppRun Site app:</p>\n<pre><code class=\"language-sh\">npx apprun-site init my-apprun-site\ncd my-apprun-site\nnpm install\n</code></pre>\n<p>The <strong>init</strong> command creates a project structure.</p>\n<pre><code>public/\nsrc/\n  layouts/\n  pages/\n    home.tsx\n    contact.tsx\n    about.tsx\n  index.tsx   &lt;=== main entry\n  tsconfig.json\n.gitignore\npackage.json\nwebpack.config.js\n</code></pre>\n<p>Use <em>npm start</em> to start the dev server and run the app in browser http://localhost:8080</p>\n<blockquote>\n<p>You can modify the home, contact and about components. Or add a few pages your own. The dev server will refresh to show your changes on the fly.</p>\n</blockquote>\n<p>The main entry point of the app is the <strong>src/index.tsx</strong>. It looks like:</p>\n<pre><code class=\"language-javascript\">import app from 'apprun-site';\nimport layout from './layout';\nimport pages from './_lib';\nconst nav = [\n  { &quot;text&quot;: &quot;Home&quot;, &quot;link&quot;: &quot;/&quot; },\n  { &quot;text&quot;: &quot;Contact&quot;, &quot;link&quot;: &quot;/contact&quot; },\n  { &quot;text&quot;: &quot;About&quot;, &quot;link&quot;: &quot;/about&quot; }\n];\n\nconst config = {\n  title: 'My AppRun Site',\n  element: 'main',\n  nav,\n  sidebar: nav,\n  layout,\n  pages\n};\n\napp.start(site);\n</code></pre>\n<p><strong>src/index.tsx</strong> imports the <em>app</em> object from <em>apprun.site</em> and calls the <em>app.start</em> function to start the app with the configuration options.</p>\n<p>Next, let's see how to <a href=\"#configuration\">configure</a>.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"how-it-works\">How It Works</h1>\n<p>AppRun Site apps are Single Page Applications (SPA). You develop the pages using AppRun components, HTML files, and markdown files.</p>\n<p>You put AppRun components in the <em>pages</em> directory as following:</p>\n<pre><code>src/\n  pages/\n    home.tsx\n    contact.tsx\n    about.tsx\n</code></pre>\n<p>You then run the <em>build</em> script.</p>\n<pre><code class=\"language-sh\">npx apprun-site build\n</code></pre>\n<p>You can also run the <em>build</em> script in the watch mode.</p>\n<pre><code class=\"language-sh\">npx apprun-site build -w\n</code></pre>\n<blockquote>\n<p>If you have HTML files and markdown files in the <em>pages</em> directory, the <em>build</em> scripts converts them into AppRun components and saves to the <strong>src/_lib</strong> directory.</p>\n</blockquote>\n<p>The <em>build</em> scripts creates the <strong>src/_lib/index.tsx</strong> file that contains the routing events and the components.</p>\n<pre><code class=\"language-javascript\">// this file is auto-generated\nimport _about_0 from './about_tsx';\nimport _contact_1 from './contact_tsx';\nimport _home_2 from './home_tsx';\nexport default [\n  [&quot;/about&quot;, _about_0],\n  [&quot;/contact&quot;, _contact_1],\n  [&quot;/home&quot;, _home_2],\n] as (readonly [string, any])[];\n</code></pre>\n<p>The generated <strong>src/_lib/index.tsx</strong> imports the all components from <strong>src/_lib</strong> and <strong>src/pages</strong>; and exports an array that maps routing events to components.</p>\n<p>The event-component mapping from <strong>src/_lib/index.tsx</strong> is used to creates the pages, and sets the routing events in the main entry point of the application, <strong>src/index.tsx</strong>,</p>\n<p>Let's <a href=\"#getting-started\">Getting Started</a> see it in action.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"apprun-site\">AppRun Site</h1>\n<h2 id=\"introduction\">Introduction</h2>\n<p><a href=\"https://apprun.js.org\">AppRun</a> is a Javascript library for building reliable, high-performance web applications using the Elm inspired Architecture, events, and components.</p>\n<p><strong><a href=\"https://yysun.github.io/apprun-site\">AppRun Site</a></strong> is a framework for building AppRun applications.</p>\n<h2 id=\"features\">Features</h2>\n<ul>\n<li>Progressive Web App (PWA) - support offline</li>\n<li>Single Page App (SPA) - routing using / or #</li>\n<li>4 built-in layouts and bring your own</li>\n<li>Compile HTML, markdown pages to AppRun components</li>\n<li>Auto generate the index of pages</li>\n<li>Build app logic using AppRun/Web components</li>\n<li>Targets ES5 or ES Module</li>\n<li>Extensible through plugins (WIP)</li>\n</ul>\n<h2 id=\"quick-start\">Quick Start</h2>\n<p>To create an AppRun Site:</p>\n<pre><code class=\"language-sh\">npx apprun-site init my-apprun-site\ncd my-apprun-site\nnpm install\n</code></pre>\n<p>Then, you can use:</p>\n<ul>\n<li>Use <em>npm start</em> to start the dev server</li>\n<li>Use <em>npm run build</em> to build for production</li>\n</ul>\n<h2 id=\"ready-for-more-information\">Ready for More Information</h2>\n<ul>\n<li>You can find out <a href=\"#how-it-works\">how it works</a>.</li>\n</ul>\n`;\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = state => app.createElement(\"div\", null, state);\r\n        this.update = {\r\n            '.': (state, id) => id\r\n        };\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"pages\">Pages</h1>\n<p>AppRun Site pages are made of AppRun components, HTML files, and markdown files. They are stored under the <strong>src/pages</strong> directory.</p>\n<h2 id=\"component-pages\">Component Pages</h2>\n<p>It is straightforward to create AppRun components as AppRun Site pages. You create a component class around the <em>state</em>, <em>view</em>, and <em>update</em>.</p>\n<pre><code class=\"language-javascript\">import {app, Component} from 'apprun';\n\nclass About extends Component {\n  state = 'about page';\n  view = state =&gt; &lt;div/&gt;;\n  update = {};\n}\n</code></pre>\n<h2 id=\"html-pages\">HTML Pages</h2>\n<p>In additional to AppRun components, you can create HTML files inside the <strong>src/pages</strong> directory. They are converted into AppRun components by the <em>npx apprun-site build</em> command.</p>\n<p>E.g., if you have an <em>a.html</em> file</p>\n<pre><code class=\"language-html\">&lt;h1&gt;Hello World&lt;/h1&gt;\n</code></pre>\n<p>It will be converted into a component.</p>\n<pre><code class=\"language-javascript\">import { app, Component } from 'apprun';\nexport default class extends Component {\n  view = _ =&gt; '_html:&lt;h1&gt;Hello World&lt;/h1&gt;';\n}\n</code></pre>\n<h2 id=\"markdown-pages\">Markdown Pages</h2>\n<p>You can also create markdown files inside the <strong>src/pages</strong> directory. They are converted into AppRun components by the <em>npx apprun-site build</em> command.</p>\n<p>E.g., if you have an <em>a.md</em> file</p>\n<pre><code class=\"language-markdown\"># Hello World\n</code></pre>\n<p>It will be converted into a component.</p>\n<pre><code class=\"language-javascript\">import { app, Component } from 'apprun';\nexport default class extends Component {\n  view = _ =&gt; '_html:&lt;h1&gt;Hello World&lt;/h1&gt;';\n}\n</code></pre>\n<p>All pages are components that are waiting to be <a href=\"#routing\">activated/routed</a> using the events.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"progressive-web-apps-(pwa)\">Progressive Web Apps (PWA)</h1>\n<p>AppRun Site includes the service worker from <a href=\"https://www.pwabuilder.com/\">PWA Builder</a>.</p>\n<p>The service worker improves the performance of your app, and make it work offline. The advanced caching service worker allows you to configure files and routes that are cached in different manners (pre-cache, network/server first, cache first, etc.).</p>\n<h2 id=\"register-the-service-worker\">Register the Service Worker</h2>\n<p>To register the service worker, include the script in the header section of the <strong>index.html</strong> file.</p>\n<pre><code>&lt;script src=&quot;sw-init.js&quot;&gt;&lt;/script&gt;\n</code></pre>\n<h2 id=\"configure-the-service-worker\">Configure the Service Worker</h2>\n<p>To configure the service worker, open and edit the <strong>sw.js</strong> file.</p>\n<pre><code class=\"language-javascript\">const CACHE = &quot;my-apprun-site&quot;;\nconst precacheFiles = [\n  &quot;index.html&quot;,\n  &quot;app.js&quot;,\n  &quot;style.css&quot;\n];\n\n// TODO: replace the following with the correct offline fallback page i.e.: const offlineFallbackPage = &quot;offline.html&quot;;\nconst offlineFallbackPage = &quot;offline.html&quot;;\n\nconst networkFirstPaths = [\n  /* Add an array of regex of paths that should go network first */\n  // Example: /\\/api\\/.*/\n];\n\nconst avoidCachingPaths = [\n  /* Add an array of regex of paths that shouldn't be cached */\n  // Example: /\\/api\\/.*/\n  /\\/sockjs-node\\/*/\n];\n\n</code></pre>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"references\">References</h1>\n<h2 id=\"init-command\">Init Command</h2>\n<pre><code>Usage:\n  $ npx apprun-site init [targetDir]\n\nOptions:\n  -r, --repo [repo]  repository, default: apprunjs/apprun-starter\n  -h, --help         Display this message\n  -v, --version      Display version number\n</code></pre>\n<h2 id=\"build-command\">Build Command</h2>\n<pre><code>Usage:\n  $ npx apprun-site build\n\nOptions:\n  -r, --root [root]         event root, default /, you can make it #\n  -s, --source [sourceDir]  source directory\n  -t, --target [targetDir]  target directory\n  -w, --watch               watch the folder\n  -V, --verbose             show verbose diagnostic information\n  -h, --help                Display this message\n  -v, --version             Display version number\n</code></pre>\n<h2 id=\"fix-esm-command\">Fix ESM Command</h2>\n<pre><code>Usage:\n  $ npx apprun-site fix-esm\n\nOptions:\n  -m, --modules &lt;modules&gt;    Choose a directory for global modules (default: _modules)\n  -V, --verbose             show verbose diagnostic information\n  -s, --source [sourceDir]  source directory\n  -h, --help                Display this message\n  -v, --version             Display version number\n</code></pre>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"routing\">Routing</h1>\n<p>AppRun Site router detects the hash/path changes in URL (by listening to the window's <em>onpopstate</em> event) and publishes the routing events.</p>\n<p>AppRun Site <strong>app.start</strong> function maps the routing events to the page components.</p>\n<h2 id=\"routing-events\">Routing Events</h2>\n<p>Pages are components inside the <strong>src/pages</strong> directory. Each component has a built-in <em>refresh</em> event, the <strong>.</strong> event to display itself to the mounted element.</p>\n<p>E.g. if you have an <em>Item</em> component (<strong>src/pages/item.tsx</strong>). AppRun Site maps the routing event <em>/item</em> to the component's built-in <em>refresh</em> event.</p>\n<pre><code class=\"language-javascript\">import _item from '_lib/item.tsx'\napp.on('/item', (...p) =&gt; _item.run('.', ...p))\n</code></pre>\n<p>When users navigate to http://.../item/a/b/c, the <em>/item</em> event is published and sent to the _<em>item</em> component to display along with 'a', 'b', 'c' as the event parameters.</p>\n<p>You can override it to accept routing parameters.</p>\n<pre><code class=\"language-javascript\">import { app, Component } from 'apprun';\n\nexport default class extends Component {\n  view = state =&gt; &lt;div&gt;{state}&lt;/div&gt;\n  update = {\n    '.': (state, id) =&gt; id\n  }\n}\n</code></pre>\n<h2 id=\"routing-with-pretty-links-(%2F)\">Routing with Pretty Links (/)</h2>\n<p>By default, AppRun Site uses pretty links (i.e., non-hash links) and have HTML5 browser history. You need to set up the web server to have the 404-fallback page to be the <em>index.htm</em> in case users hard refresh the pages.</p>\n<h2 id=\"routing-with-hash-(%23)\">Routing with Hash (#)</h2>\n<p>You can also use the hash sign for routing. E.g.,  URL http://..../#about triggers the <em>#about</em> event and then wakes up the <em>About</em> component. To enable this feature, just set the _eventRoot in the configuration.</p>\n<pre><code class=\"language-javascript\">import app from 'apprun-site';\n\nconst site = {\n  title: 'My AppRun Site',\n  // ...\n  eventRoot: '#'\n};\n\napp.start(site);\n</code></pre>\n<p>You also need to set the --root options to be '#' when running the <em>npx apprun-site build</em> command.</p>\n<pre><code class=\"language-sh\">npx apprun-site build --root '#'\n</code></pre>\n<p>Next, you can learn more about how <a href=\"#components\">components</a>.</p>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"todo\">Todo</h1>\n<ul>\n<li>Plugin Support</li>\n<li>Site Search</li>\n<li>GraphQL</li>\n</ul>\n`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1>Web Component - HTML</h1>\r\n<div>You can use web components in HTML</div>\r\n<pre>\r\n    &lt;my-img src='logo.png'&gt;&lt;/my-img&gt;\r\n</pre>\r\n<my-img src='logo.png'></my-img>`;\r\n    }\r\n}\r\n","import { Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = _ => `_html:<h1 id=\"web-components\">Web Components</h1>\n<p>Web components are custom elements in HTML.</p>\n<pre><code>&lt;my-img src='logo.png'&gt;&lt;/my-img&gt;\n</code></pre>\n<p>You can create web components out of AppRun components.</p>\n<pre><code class=\"language-javascript\">import {app, Component, customElement} from 'apprun';\n\n@customElement('my-img')\nexport default class extends Component {\n  view = ({ src }) =&gt; &lt;img src={src} /&gt;\n}\n</code></pre>\n<p>And then use it in <a href=\"#web-components_html\">HTML page</a>, or in <a href=\"#web-components_tsx\">JSX view</a> of AppRun components, or in markdown page like in this page.</p>\n<p>This page is a markdown page. It should display the web component.</p>\n<p><my-img src='logo.png'></my-img></p>\n`;\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.view = (state) => app.createElement(app.Fragment, null,\r\n            app.createElement(\"h1\", null, \"Web Component - tsx\"),\r\n            app.createElement(\"div\", null, \"You can use web components in the component's jsx view\"),\r\n            app.createElement(\"pre\", null, \"view = (state) => <my-img src='logo.png'></my-img>\"),\r\n            app.createElement(\"div\", null,\r\n                app.createElement(\"my-img\", { src: 'logo.png' })));\r\n    }\r\n}\r\n","import { app, Component } from 'apprun';\r\nexport default class extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = '404';\r\n        this.view = (state) => {\r\n            return app.createElement(\"div\", null, state);\r\n        };\r\n        this.update = [\r\n            ['.', state => state]\r\n        ];\r\n    }\r\n}\r\n","import app from './_site/index';\r\nimport './components/my-img';\r\nimport './components/my-xkcd';\r\nimport layout from './layout';\r\nimport pages from './_lib/index';\r\nconst nav = [\r\n    { \"text\": \"Home\", \"link\": \"/\" }\r\n];\r\nconst links = [\r\n    { \"link\": \"#\", \"text\": \"Introduction\" },\r\n    { \"link\": \"#how-it-works\", \"text\": \"How It Works\" },\r\n    { \"link\": \"#getting-started\", \"text\": \"Getting Started\" },\r\n    { \"link\": \"#configuration\", \"text\": \"Configuration\" },\r\n    { \"link\": \"#configuration/layout\", \"text\": \"Layout\" },\r\n    { \"link\": \"#configuration/diy\", \"text\": \"Layout DIY\" },\r\n    { \"link\": \"#pages\", \"text\": \"Pages\" },\r\n    { \"link\": \"#routing\", \"text\": \"Routing\" },\r\n    { \"link\": \"#components\", \"text\": \"Components\" },\r\n    { \"link\": \"#web-components\", \"text\": \"Web Components\" },\r\n    { \"link\": \"#fetch\", \"text\": \"Async Fetch\" },\r\n    { \"link\": \"#pwa\", \"text\": \"PWA\" },\r\n    { \"link\": \"#esm\", \"text\": \"Modules\" },\r\n    { \"link\": \"#deploy\", \"text\": \"Build and Deploy\" },\r\n    { \"link\": \"#references\", \"text\": \"References\" },\r\n    { \"link\": \"#todo\", \"text\": \"Todo (WIP)\" }\r\n];\r\nconst config = {\r\n    title: 'AppRun Site',\r\n    element: 'main',\r\n    nav,\r\n    sidebar: links,\r\n    layout,\r\n    pages,\r\n    eventRoot: '#'\r\n};\r\napp.start(config);\r\n","import app from 'apprun';\r\nexport default ({ title, element, nav, sidebar }) => app.createElement(app.Fragment, null,\r\n    app.createElement(\"nav\", { class: \"main-nav\", markdown: \"0\" },\r\n        app.createElement(\"a\", { class: \"nav-title\", href: \"/\" }, title),\r\n        app.createElement(\"div\", { class: \"flex\" }),\r\n        nav.map(item => app.createElement(\"a\", { class: \"nav-item\", href: item.link }, item.text)),\r\n        app.createElement(\"a\", { class: \"icon\", href: \"https://github.com/yysun/apprun-site\", title: \"GitHub\" },\r\n            app.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", width: \"24\", height: \"24\", fill: \"currentcolor\" },\r\n                app.createElement(\"path\", { d: \"M12,2C6.48,2,2,6.59,2,12.25c0,4.53,2.87,8.37,6.84,9.73c0.5,0.09,0.68-0.22,0.68-0.49c0-0.24-0.01-0.89-0.01-1.74c-2.78,0.62-3.37-1.37-3.37-1.37c-0.45-1.18-1.11-1.5-1.11-1.5c-0.91-0.64,0.07-0.62,0.07-0.62c1,0.07,1.53,1.06,1.53,1.06c0.89,1.57,2.34,1.11,2.91,0.85c0.09-0.66,0.35-1.11,0.63-1.37c-2.22-0.26-4.56-1.14-4.56-5.07c0-1.12,0.39-2.03,1.03-2.75c-0.1-0.26-0.45-1.3,0.1-2.71c0,0,0.84-0.28,2.75,1.05c0.8-0.23,1.65-0.34,2.5-0.34c0.85,0,1.7,0.12,2.5,0.34c1.91-1.33,2.75-1.05,2.75-1.05c0.55,1.41,0.2,2.45,0.1,2.71c0.64,0.72,1.03,1.63,1.03,2.75c0,3.94-2.34,4.81-4.57,5.06c0.36,0.32,0.68,0.94,0.68,1.9c0,1.37-0.01,2.48-0.01,2.81c0,0.27,0.18,0.59,0.69,0.49c3.97-1.36,6.83-5.2,6.83-9.73C22,6.59,17.52,2,12,2\" })))),\r\n    app.createElement(\"main\", { class: \"wrapper\" },\r\n        app.createElement(\"nav\", { class: \"side-nav\" },\r\n            app.createElement(\"button\", { id: \"toggleNavButton\" }, \"Menu\"),\r\n            app.createElement(\"ul\", null, sidebar.map(item => app.createElement(\"li\", null,\r\n                app.createElement(\"a\", { href: item.link }, item.text))))),\r\n        app.createElement(\"article\", { id: element })));\r\n","// this file is auto-generated\r\nimport _components_md_0 from './components_md';\r\nimport _diy_md_1 from './configuration/diy_md';\r\nimport _index_md_2 from './configuration/index_md';\r\nimport _layout_md_3 from './configuration/layout_md';\r\nimport _firebase_md_4 from './deploy/firebase_md';\r\nimport _github_md_5 from './deploy/github_md';\r\nimport _index_md_6 from './deploy/index_md';\r\nimport _esm_md_7 from './esm_md';\r\nimport _faq_md_8 from './faq_md';\r\nimport _fetch_md_9 from './fetch_md';\r\nimport _getting_started_md_10 from './getting-started_md';\r\nimport _how_it_works_md_11 from './how-it-works_md';\r\nimport _index_md_12 from './index_md';\r\nimport _item_13 from './item_tsx';\r\nimport _pages_md_14 from './pages_md';\r\nimport _pwa_md_15 from './pwa_md';\r\nimport _references_md_16 from './references_md';\r\nimport _routing_md_17 from './routing_md';\r\nimport _todo_md_18 from './todo_md';\r\nimport _html_html_19 from './web-components/html_html';\r\nimport _index_md_20 from './web-components/index_md';\r\nimport _tsx_21 from './web-components/tsx_tsx';\r\nimport _index_22 from './_404/index_tsx';\r\nexport default [\r\n    [\"#components\", _components_md_0],\r\n    [\"#configuration/diy\", _diy_md_1],\r\n    [\"#configuration\", _index_md_2],\r\n    [\"#configuration/layout\", _layout_md_3],\r\n    [\"#deploy/firebase\", _firebase_md_4],\r\n    [\"#deploy/github\", _github_md_5],\r\n    [\"#deploy\", _index_md_6],\r\n    [\"#esm\", _esm_md_7],\r\n    [\"#faq\", _faq_md_8],\r\n    [\"#fetch\", _fetch_md_9],\r\n    [\"#getting-started\", _getting_started_md_10],\r\n    [\"#how-it-works\", _how_it_works_md_11],\r\n    [\"#\", _index_md_12],\r\n    [\"#item\", _item_13],\r\n    [\"#pages\", _pages_md_14],\r\n    [\"#pwa\", _pwa_md_15],\r\n    [\"#references\", _references_md_16],\r\n    [\"#routing\", _routing_md_17],\r\n    [\"#todo\", _todo_md_18],\r\n    [\"#web-components/html\", _html_html_19],\r\n    [\"#web-components\", _index_md_20],\r\n    [\"#web-components/tsx\", _tsx_21],\r\n    [\"#_404\", _index_22],\r\n];\r\n"],"sourceRoot":""}